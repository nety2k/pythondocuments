        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	  <link rel="stylesheet" href="diveintopython.css" type="text/css">
      <link rev="made" href="mailto:johnsonj@dreamwiz.com">
      <meta name="generator" content="johnsonj">
      <meta name="description" content="ë‹¤ì´ë¹™ íŒŒì´ì¬ ë²ˆì—­.">
      <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free">
      <meta name="description" content="í•œê¸€íŒ">
   </head>
   <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.2.1028</b></a>  on  06/14/12 ¿ÀÈÄ 11:14:50.<br>
<b>Address:</b> <a class="info" href="http://coreapython.hosting.paran.com/dive/chap15.html">http://coreapython.hosting.paran.com/dive/chap15.html</a><br>
<b>Title:</b> 15. ìš”ì†Œí™”(Refactoring) &nbsp;&bull;&nbsp; <b>Size:</b> 75424<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


<TABLE class='headerOFcontent'>
<TR>
    <TD align="left"><A HREF="chap14.html">â˜œ ì œ 14 ì¥ í…ŒìŠ¤íŠ¸-ë¨¼ì € í”„ë¡œê·¸ë˜ë°</A></TD>
    <TD align="center"><A HREF="chap00.html" title="ëª©ì°¨ë¡œ">"""  Dive Into Python  """<BR>ë‹¤ì´ë¹™ íŒŒì´ì¬</A></TD>
    <TD align="right"><A HREF="chap16.html">ì œ 16 ì¥ ê¸°ëŠ¥ì  í”„ë¡œê·¸ë˜ë° â˜</A></TD>
</TR>
</TABLE>
		 <div name="15ì¥" class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="roman2"></a>ì œ&nbsp;15 ì¥&nbsp;ë¦¬íŒ©í† ë§</h1>
                  </div>
               </div>
               <div></div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.bugs"></a>15.1.&nbsp;ë²„ê·¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•</h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ìµœì„ ì„ ë‹¤í•´ ì¢…í•©ì ì¸ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë”ë¼ë„ ë²„ê·¸ëŠ” ì¼ì–´ë‚©ë‹ˆë‹¤. ë³¸ì¸ì´ ìƒê°í•˜ëŠ” &#8220;<span class="quote">ë²„ê·¸</span>&#8221;ë€ ë¬´ìŠ¨ ëœ»ì¼ê¹Œìš”? ì—¬ê¸°ì—ì„œ ë²„ê·¸ë€ ì•„ì§ ì‘ì„±í•˜ì§€ ì•Šì€ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ì…ë‹ˆë‹¤.
                  </p>
               </div>
               <div class="example"><a name="d0e34158"></a><h3 class="title">ì˜ˆì œ&nbsp;15.1.&nbsp;ë²„ê·¸ì˜ ì˜ˆ</h3><pre class="screen"><tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">import roman5</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">roman5.fromRoman("")</span> <a name="roman.bugs.1.1"></a><span class="round">â‘ </span>
<span class="computeroutput">0</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.bugs.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ê¸°ì–µí•˜ì‹­ë‹ˆê¹Œ? <a href="http://coreapython.hosting.paran.com/dive/chap14.html#roman.stage5" title="14.5.&nbsp;roman.py, stage 5">ì• ì„¹ì…˜</a>ì—ì„œ ìœ íš¨í•œ ë¡œë§ˆ ìˆ«ìì¸ì§€ ì ê²€í•˜ëŠ”ë° ì‚¬ìš©í•œ ì •ê·œ í‘œí˜„ì‹ì— ë¹ˆ ë¬¸ìì—´ì´ ë¶€í•©í•˜ëŠ”ì§€ ì§€ì¼œë³´ì•˜ìŠµë‹ˆë‹¤. ì, ì•Œê³ ë³´ë‹ˆ ìµœì¢… ë²„ì „ì˜ ì •ê·œ í‘œí˜„ì‹ì—ë„ ì—¬ì „íˆ ì°¸ì…ë‹ˆë‹¤. ê·¸ê²ƒì´ ë°”ë¡œ ë²„ê·¸ì…ë‹ˆë‹¤; ìœ íš¨í•œ ë¡œë§ˆ ìˆ«ìë¥¼ ë‚˜íƒ€ë‚´ì§€ ëª»í•˜ëŠ” ë‹¤ë¥¸ ë¬¸ìì—´ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë¹ˆ ë¬¸ìì—´ë„ <tt class="errorcode">InvalidRomanNumeralError</tt> ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ë²„ê·¸ê°€ ë‚˜íƒ€ë‚œ í›„ ê·¸ë¦¬ê³  ê·¸ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê¸° ì „ì—,  ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ì‘ì„±í•´ì„œ ê·¸ ë²„ê·¸ë¥¼ ì˜ˆì‹œí•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>
               <div class="example"><a name="d0e34188"></a><h3 class="title">ì˜ˆì œ&nbsp;15.2.&nbsp;ë²„ê·¸ í…ŒìŠ¤íŠ¸ (<tt class="filename">romantest61.py</tt>)
                  </h3><pre class="programlisting">
class FromRomanBadInput(unittest.TestCase):                                      

    # ì•ì˜ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” ëª…ì¾Œí•˜ê²Œ í•˜ê¸° ìœ„í•´ ìƒëµí•¨ (ë°”ë€Œì§€ ì•Šê³  ê·¸ëŒ€ë¡œì„)

    def testBlank(self):
        """fromRomanì€ ë¹ˆ ë¬¸ìì—´ì— ì‹¤íŒ¨í•´ì•¼ í•œë‹¤"""
        self.assertRaises(roman.InvalidRomanNumeralError, roman.fromRoman, "") <a name="roman.bugs.2.1"></a><span class="round">â‘ </span>
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.bugs.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì•„ì£¼ ê°„ë‹¨í•©ë‹ˆë‹¤.  ë¹ˆ ë¬¸ìì—´ì„ ê°€ì§€ê³  <tt class="function">fromRoman</tt>ì„ í˜¸ì¶œí•´ì„œ <tt class="errorcode">InvalidRomanNumeralError</tt> ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ë²„ê·¸ë¥¼ ë°œê²¬í•˜ëŠ” ë¶€ë¶„ì´ ì–´ë ¤ì› ìŠµë‹ˆë‹¤; ì´ì œ ê·¸ì— ê´€í•˜ì—¬ ì•Œì•˜ìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¼ì€ ì‰½ìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì½”ë“œì— ë²„ê·¸ê°€ ìˆê³ , ì´ì œ ì´ ë²„ê·¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ìˆìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” ì‹¤íŒ¨í•©ë‹ˆë‹¤:</p>
               <div class="example"><a name="d0e34210"></a><h3 class="title">ì˜ˆì œ&nbsp;15.3.&nbsp; <tt class="filename">roman61.py</tt>ì— ëŒ€í•˜ì—¬ <tt class="filename">romantest61.py</tt>ë¥¼ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... ok
toRoman should always return uppercase ... ok
fromRoman should fail with blank string ... FAIL
fromRoman should fail with malformed antecedents ... ok
fromRoman should fail with repeated pairs of numerals ... ok
fromRoman should fail with too many repeated numerals ... ok
fromRoman should give known result with known input ... ok
toRoman should give known result with known input ... ok
fromRoman(toRoman(n))==n for all n ... ok
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok

======================================================================
FAIL: fromRoman should fail with blank string
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage6\romantest61.py", line 137, in testBlank
    self.assertRaises(roman61.InvalidRomanNumeralError, roman61.fromRoman, "")
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 13 tests in 2.864s

FAILED (failures=1)</span></pre></div>
               <p><span class="emphasis"><em>ì´ì œ</em></span> ë²„ê·¸ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e34229"></a><h3 class="title">ì˜ˆì œ&nbsp;15.4.&nbsp;ë²„ê·¸ ìˆ˜ì •í•˜ê¸° (<tt class="filename">roman62.py</tt>)
                  </h3>
                  <p>ë‹¤ìŒ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage6/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    if not s: <a name="roman.bugs.4.1"></a><span class="round">â‘ </span>
        raise InvalidRomanNumeralError, 'Input can not be blank'
    if not re.search(romanNumeralPattern, s):
        raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s

    result = 0
    index = 0
    for numeral, integer in romanNumeralMap:
        while s[index:index+len(numeral)] == numeral:
            result += integer
            index += len(numeral)
    return result
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.bugs.4.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì˜¤ì§ ë‘ ì¤„ì˜ ì½”ë“œë§Œ í•„ìš”í•©ë‹ˆë‹¤: ë¹ˆ ë¬¸ìì—´ì„ ëª…ì‹œì ìœ¼ë¡œ ì ê²€í•˜ê³ , <tt class="literal">raise</tt> ì„œìˆ ë¬¸ì´ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <div class="example"><a name="d0e34251"></a><h3 class="title">ì˜ˆì œ&nbsp;15.5.&nbsp; <tt class="filename">roman62.py</tt>ì— ëŒ€í•˜ì—¬ <tt class="filename">romantest62.py</tt> ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... ok
toRoman should always return uppercase ... ok
fromRoman should fail with blank string ... ok </span><a name="roman.bugs.5.1"></a><span class="round">â‘ </span><span class="computeroutput">
fromRoman should fail with malformed antecedents ... ok
fromRoman should fail with repeated pairs of numerals ... ok
fromRoman should fail with too many repeated numerals ... ok
fromRoman should give known result with known input ... ok
toRoman should give known result with known input ... ok
fromRoman(toRoman(n))==n for all n ... ok
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok

----------------------------------------------------------------------
Ran 13 tests in 2.834s

OK</span> <a name="roman.bugs.5.2"></a><span class="round">â‘¡</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.bugs.5.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ë¹ˆ ë¬¸ìì—´ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” ì´ì œ í†µê³¼í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë²„ê·¸ëŠ” ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.bugs.5.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë„ ëª¨ë‘ í†µê³¼í•˜ëŠ”ë°, ì´ëŠ” ì´ ë²„ê·¸ ìˆ˜ì •ì´ ì–´ë–¤ ê²ƒë„ ë§ê°€íŠ¸ë¦¬ì§€ ì•Šì•˜ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì½”ë”©ì„ ë©ˆì¶”ì„¸ìš”.</td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì´ëŸ° ì‹ìœ¼ë¡œ ì½”ë”©í•œë‹¤ê³  í•˜ë”ë¼ë„ ë” ì‰½ê²Œ ë²„ê·¸ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. (ì´ì™€ ê°™ì´) ê°„ë‹¨í•œ ë²„ê·¸ëŠ” ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤; ë³µì¡í•œ ë²„ê·¸ë¼ë©´ ë³µì¡í•œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ìš”êµ¬ë©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸-ì¤‘ì‹¬ì  í™˜ê²½ì—ì„œ, ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ”ë° ì‹œê°„ì´ <span class="emphasis"><em>ë” ê±¸ë¦¬ëŠ” ë“¯ ë³´ì´ëŠ”ë°</em></span>, ì •í™•í•˜ê²Œ ë²„ê·¸ê°€ ë¬´ì—‡ì¸ì§€ ì½”ë“œì— ê·œì •í•˜ê³  (ì¦‰, í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ë§Œë“¤ê³ ), ë²„ê·¸ ìì²´ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ê³§ë°”ë¡œ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ìˆ˜ì •ì„ ì˜ëª»í–ˆëŠ”ì§€ ì•„ë‹ˆë©´ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ ìì²´ì— ë²„ê·¸ê°€ ìˆëŠ”ì§€ ì•Œì•„ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ë³´ë©´ ì´ë ‡ê²Œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì½”ë“œì™€ í…ŒìŠ¤íŠ¸ë˜ëŠ” ì½”ë“œ ì‚¬ì´ë¥¼ ì™”ë‹¤ê°”ë‹¤ í•˜ëŠ” ê²ƒì€ ê·¸ ìì²´ë¡œ íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ë²„ê·¸ê°€ ì²˜ìŒ ë°œê²¬ë˜ì ë§ˆì ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì •ë  ê°€ëŠ¥ì„±ì´ ë” ë†’ì•„ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ, ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ì™€ í•¨ê»˜ <span class="emphasis"><em>ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€</em></span>ë¥¼ ì‰½ê²Œ ì¬ì‹¤í–‰í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ìƒˆë¡œìš´ ì½”ë“œë¥¼ ìˆ˜ì •í•  ë•Œ ì˜ˆì „ ì½”ë“œë¥¼ ë§ê°€íŠ¸ë¦´ ê°€ëŠ¥ì„±ì´ í›¨ì”¬ ë” ì ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ë‚´ì¼ì˜ íšŒê·€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.
               </p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.change"></a>15.2.&nbsp;ìš”êµ¬ì¡°ê±´ ë³€ê²½ì„ ì²˜ë¦¬í•˜ëŠ” ë²•</h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ê³ ê°ì„ ë‰˜ì—¬ ë†“ê³  ê°€ìœ„ì™€ ëœ¨ê±°ìš´ ì™ìŠ¤ë¡œ ê³ ë¬¸í•´ì„œ ìµœì„ ì„ ë‹¤í•´ ìš”êµ¬ì¡°ê±´ì„ ì§œëƒˆì„ì§€ë¼ë„ ìš”êµ¬ì¡°ê±´ì€ ë³€í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê³ ê°ì€ ë³´ê¸° ì „ê¹Œì§€ëŠ” ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€ ì•Œì§€ ëª»í•˜ë©°, ì‹¬ì§€ì–´ ë³´ë”ë¼ë„ ë¬´ì—‡ì´ë©´ ì¶©ë¶„íˆ ìœ ìš©í• ì§€ ì •ë°€í•˜ê²Œ ì¡°ëª©ì¡°ëª© ê·œì •í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ì •ë°€í•˜ê²Œ ê·œì •í•œë‹¤ê³  í• ì§€ë¼ë„ ì–´ì¨Œë“  ë‹¤ìŒ ë°°í¬ë³¸ì—ëŠ” ë” ë§ì€ ê²ƒì„ ì›í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìš”êµ¬ ì¡°ê±´ì´ ë³€í•¨ì— ë”°ë¼ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ê°±ì‹ í•  ì¤€ë¹„ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤. 
                  </p>
               </div>
               <p>ì˜ˆë¥¼ ë“¤ë©´ ë¡œë§ˆ ìˆ«ì ë³€í™˜ í•¨ìˆ˜ì˜ ë³€í™˜ ë²”ìœ„ë¥¼ í™•ëŒ€í•˜ê³  ì‹¶ë‹¤ê³  í•´ë´…ì‹œë‹¤. ê¸°ì–µí•˜ì‹­ë‹ˆê¹Œ? <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.divein" title="13.2.&nbsp;Diving in">ê·œì¹™ì— ì˜í•˜ë©´</a> ì–´ë–¤ ë¬¸ìë„ ì„¸ë²ˆì„ ë„˜ì–´ ë°˜ë³µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì, ë¡œë§ˆ ìˆ«ìëŠ” ì–¼ë§ˆë“ ì§€ ê·¸ ê·œì¹™ì— ì˜ˆì™¸ë¥¼ ë‘ì–´ 4ê°œì˜ <tt class="literal">M</tt> ë¬¸ìë¥¼ ì¼ë ¬ë¡œ ë‘ì–´ <tt class="literal">4000</tt>ì„ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ì´ë¥¼ ë°”ê¾¸ë©´ ë³€í™˜í•œ ê°€ëŠ¥í•œ ìˆ«ì ë²”ìœ„ë¥¼ <tt class="literal">1..3999</tt>ì—ì„œ <tt class="literal">1..4999</tt>ë¡œ í™•ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë¨¼ì € í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ì— ëª‡ê°€ì§€ ë³€ê²½ì„ ê°€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e34307"></a><h3 class="title">ì˜ˆì œ&nbsp;15.6.&nbsp;ìƒˆë¡œìš´ ìš”êµ¬ì¡°ê±´ì— ë§ì¶”ê¸° ìœ„í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ ìˆ˜ì •í•˜ê¸° (<tt class="filename">romantest71.py</tt>)
                  </h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage7/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ì˜ˆì œë¥¼</a> ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
import roman71
import unittest

class KnownValues(unittest.TestCase):
    knownValues = ( (1, 'I'),
                    (2, 'II'),
                    (3, 'III'),
                    (4, 'IV'),
                    (5, 'V'),
                    (6, 'VI'),
                    (7, 'VII'),
                    (8, 'VIII'),
                    (9, 'IX'),
                    (10, 'X'),
                    (50, 'L'),
                    (100, 'C'),
                    (500, 'D'),
                    (1000, 'M'),
                    (31, 'XXXI'),
                    (148, 'CXLVIII'),
                    (294, 'CCXCIV'),
                    (312, 'CCCXII'),
                    (421, 'CDXXI'),
                    (528, 'DXXVIII'),
                    (621, 'DCXXI'),
                    (782, 'DCCLXXXII'),
                    (870, 'DCCCLXX'),
                    (941, 'CMXLI'),
                    (1043, 'MXLIII'),
                    (1110, 'MCX'),
                    (1226, 'MCCXXVI'),
                    (1301, 'MCCCI'),
                    (1485, 'MCDLXXXV'),
                    (1509, 'MDIX'),
                    (1607, 'MDCVII'),
                    (1754, 'MDCCLIV'),
                    (1832, 'MDCCCXXXII'),
                    (1993, 'MCMXCIII'),
                    (2074, 'MMLXXIV'),
                    (2152, 'MMCLII'),
                    (2212, 'MMCCXII'),
                    (2343, 'MMCCCXLIII'),
                    (2499, 'MMCDXCIX'),
                    (2574, 'MMDLXXIV'),
                    (2646, 'MMDCXLVI'),
                    (2723, 'MMDCCXXIII'),
                    (2892, 'MMDCCCXCII'),
                    (2975, 'MMCMLXXV'),
                    (3051, 'MMMLI'),
                    (3185, 'MMMCLXXXV'),
                    (3250, 'MMMCCL'),
                    (3313, 'MMMCCCXIII'),
                    (3408, 'MMMCDVIII'),
                    (3501, 'MMMDI'),
                    (3610, 'MMMDCX'),
                    (3743, 'MMMDCCXLIII'),
                    (3844, 'MMMDCCCXLIV'),
                    (3888, 'MMMDCCCLXXXVIII'),
                    (3940, 'MMMCMXL'),
                    (3999, 'MMMCMXCIX'),
                    (4000, 'MMMM'),                                       <a name="roman.change.1.1"></a><span class="round">â‘ </span>
                    (4500, 'MMMMD'),
                    (4888, 'MMMMDCCCLXXXVIII'),
                    (4999, 'MMMMCMXCIX'))

    def testToRomanKnownValues(self):
        """toRoman should give known result with known input"""
        for integer, numeral in self.knownValues:
            result = roman71.toRoman(integer)
            self.assertEqual(numeral, result)

    def testFromRomanKnownValues(self):
        """fromRoman should give known result with known input"""
        for integer, numeral in self.knownValues:
            result = roman71.fromRoman(numeral)
            self.assertEqual(integer, result)

class ToRomanBadInput(unittest.TestCase):
    def testTooLarge(self):
        """toRoman should fail with large input"""
        self.assertRaises(roman71.OutOfRangeError, roman71.toRoman, 5000) <a name="roman.change.1.2"></a><span class="round">â‘¡</span>

    def testZero(self):
        """toRoman should fail with 0 input"""
        self.assertRaises(roman71.OutOfRangeError, roman71.toRoman, 0)

    def testNegative(self):
        """toRoman should fail with negative input"""
        self.assertRaises(roman71.OutOfRangeError, roman71.toRoman, -1)

    def testNonInteger(self):
        """toRoman should fail with non-integer input"""
        self.assertRaises(roman71.NotIntegerError, roman71.toRoman, 0.5)

class FromRomanBadInput(unittest.TestCase):
    def testTooManyRepeatedNumerals(self):
        """fromRoman should fail with too many repeated numerals"""
        for s in ('MMMMM', 'DD', 'CCCC', 'LL', 'XXXX', 'VV', 'IIII'):     <a name="roman.change.1.3"></a><span class="round">â‘¢</span>
            self.assertRaises(roman71.InvalidRomanNumeralError, roman71.fromRoman, s)

    def testRepeatedPairs(self):
        """fromRoman should fail with repeated pairs of numerals"""
        for s in ('CMCM', 'CDCD', 'XCXC', 'XLXL', 'IXIX', 'IVIV'):
            self.assertRaises(roman71.InvalidRomanNumeralError, roman71.fromRoman, s)

    def testMalformedAntecedent(self):
        """fromRoman should fail with malformed antecedents"""
        for s in ('IIMXCC', 'VX', 'DCM', 'CMM', 'IXIV',
                  'MCMC', 'XCX', 'IVI', 'LM', 'LD', 'LC'):
            self.assertRaises(roman71.InvalidRomanNumeralError, roman71.fromRoman, s)

    def testBlank(self):
        """fromRoman should fail with blank string"""
        self.assertRaises(roman71.InvalidRomanNumeralError, roman71.fromRoman, "")

class SanityCheck(unittest.TestCase):
    def testSanity(self):
        """fromRoman(toRoman(n))==n for all n"""
        for integer in range(1, 5000):                                    <a name="roman.change.1.4"></a><span class="round">â‘£</span>
            numeral = roman71.toRoman(integer)
            result = roman71.fromRoman(numeral)
            self.assertEqual(integer, result)

class CaseCheck(unittest.TestCase):
    def testToRomanCase(self):
        """toRoman should always return uppercase"""
        for integer in range(1, 5000):
            numeral = roman71.toRoman(integer)
            self.assertEqual(numeral, numeral.upper())

    def testFromRomanCase(self):
        """fromRoman should only accept uppercase input"""
        for integer in range(1, 5000):
            numeral = roman71.toRoman(integer)
            roman71.fromRoman(numeral.upper())
            self.assertRaises(roman71.InvalidRomanNumeralError,
                              roman71.fromRoman, numeral.lower())

if __name__ == "__main__":
    unittest.main()
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ê¸°ì¡´ì˜ ì•Œë ¤ì§„ ê°’ì€ ë³€í•˜ì§€ ì•Šì•˜ì§€ë§Œ (ëª¨ë‘ ì—¬ì „íˆ í…ŒìŠ¤íŠ¸í•  ì´ìœ ê°€ ìˆëŠ” ê°’ë“¤ì…ë‹ˆë‹¤), <tt class="literal">4000</tt> ë²”ìœ„ì—ì„œ ëª‡ê°œ ë” ì¶”ê°€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” <tt class="literal">4000</tt> (ê°€ì¥ ê¸¸ì´ê°€ ì§§ìŒ), <tt class="literal">4500</tt> (ë‘ ë²ˆì§¸ë¡œ ì§§ìŒ), <tt class="literal">4888</tt> (ê°€ì¥ ê¸¸ì´ê°€ ê¹€), ê·¸ë¦¬ê³  <tt class="literal">4999</tt> (ê°€ì¥ í° ìˆ˜)ë¥¼ í¬í•¨ì‹œì¼°ìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.1.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">&#8220;<span class="quote">í° ì…ë ¥ì˜ ì •ì˜</span>&#8221;ê°€ ë³€í–ˆìŠµë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">4000</tt>ì„ ê°€ì§€ê³  <tt class="function">toRoman</tt>ì„ í˜¸ì¶œí•˜ê³  ì—ëŸ¬ë¥¼ ê¸°ëŒ€í–ˆì—ˆìŠµë‹ˆë‹¤; ì´ì œ <tt class="literal">4000-4999</tt>ê°€ ì¢‹ì€ ê°’ì´ë¯€ë¡œ, ì´ ë²”ìœ„ë¥¼ <tt class="literal">5000</tt>ê¹Œì§€ í™•ëŒ€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.1.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">&#8220;<span class="quote">ë„ˆë¬´ ë§ì´ ë°˜ë³µëœ ìˆ«ì</span>&#8221;ì˜ ì •ì˜ë„ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ”  <tt class="literal">'MMMM'</tt>ì„ ê°€ì§€ê³  <tt class="function">fromRoman</tt>ì„ í˜¸ì¶œí•˜ê³  ì—ëŸ¬ë¥¼ ê¸°ëŒ€í–ˆì—ˆìŠµë‹ˆë‹¤; ì´ì œëŠ” <tt class="literal">MMMM</tt>ì´ ìœ ìš”í•œ ë¡œë§ˆ ìˆ«ìì´ë¯€ë¡œ <tt class="literal">'MMMMM'</tt>ê¹Œì§€ í™•ëŒ€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.1.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ìœ„ìƒ ì ê²€ê³¼ ëŒ€ì†Œë¬¸ì ì ê²€ì€ <tt class="constant">1</tt>ì—ì„œ <tt class="literal">3999</tt>ê¹Œì§€ì˜ ëª¨ë“  ìˆ«ìë¥¼ íšŒëŒì´í•©ë‹ˆë‹¤. ê·¸ ë²”ìœ„ê°€ ì´ì œ í™•ëŒ€ë˜ì—ˆìœ¼ë¯€ë¡œ, ì´ <tt class="literal">for</tt> íšŒëŒì´ë„ ê°±ì‹ í•˜ì—¬ <tt class="literal">4999</tt>ê¹Œì§€ ì²˜ë¦¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì´ì œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ìƒˆë¡œìš´ ìš”êµ¬ì¡°ê±´ìœ¼ë¡œ ê°±ì‹ ë˜ì—ˆì§€ë§Œ ì½”ë“œëŠ” ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ì‹¤íŒ¨í•  ê²ƒì…ë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e34405"></a><h3 class="title">ì˜ˆì œ&nbsp;15.7.&nbsp; <tt class="filename">roman71.py</tt>ì— ëŒ€í•˜ì—¬ <tt class="filename">romantest71.py</tt> ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">
fromRoman should only accept uppercase input ... ERROR        </span><a name="roman.change.2.1"></a><span class="round">â‘ </span><span class="computeroutput">
toRoman should always return uppercase ... ERROR
fromRoman should fail with blank string ... ok
fromRoman should fail with malformed antecedents ... ok
fromRoman should fail with repeated pairs of numerals ... ok
fromRoman should fail with too many repeated numerals ... ok
fromRoman should give known result with known input ... ERROR </span><a name="roman.change.2.2"></a><span class="round">â‘¡</span><span class="computeroutput">
toRoman should give known result with known input ... ERROR   </span><a name="roman.change.2.3"></a><span class="round">â‘¢</span><span class="computeroutput">
fromRoman(toRoman(n))==n for all n ... ERROR                  </span><a name="roman.change.2.4"></a><span class="round">â‘£</span><span class="computeroutput">
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok
</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ëŒ€ì†Œë¬¸ì ì ê²€ì€ ì´ì œ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ íšŒëŒì´ê°€ <tt class="constant">1</tt>ì—ì„œ <tt class="literal">4999</tt>ê¹Œì§€ ëŒì§€ë§Œ <tt class="function">toRoman</tt>ì€ ì˜¤ì§ <tt class="constant">1</tt>ì—ì„œ <tt class="literal">3999</tt>ê¹Œì§€ì˜ ìˆ«ìë§Œ ë°›ì•„ë“¤ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ <tt class="literal">4000</tt>ì— ë„ë‹¬í•˜ë©´ ë°”ë¡œ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="function">fromRoman</tt> ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">'MMMM'</tt>ì— ë„ë‹¬í•˜ì ë§ˆì ì‹¤íŒ¨í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">fromRoman</tt>ì€ ì—¬ì „íˆ ì´ê²ƒì´ ìœ íš¨í•œ ë¡œë§ˆ ìˆ«ìê°€ ì•„ë‹ˆë¼ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.2.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="function">toRoman</tt> ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">4000</tt>ì— ë„ë‹¬í•˜ë©´ ë°”ë¡œ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">toRoman</tt>ì€ ì—¬ì „íˆ ì´ ìˆ«ìê°€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.2.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="literal">4000</tt>ì— ë„ë‹¬í•˜ë©´ ìœ„ìƒ ì ê²€ë„ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">toRoman</tt>ì€ ì—¬ì „íˆ ì´ ìˆ«ìê°€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div><pre class="screen"><span class="computeroutput">
======================================================================
ERROR: fromRoman should only accept uppercase input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage7\romantest71.py", line 161, in testFromRomanCase
    numeral = roman71.toRoman(integer)
  File "roman71.py", line 28, in toRoman
    raise OutOfRangeError, "number out of range (must be 1..3999)"
OutOfRangeError: number out of range (must be 1..3999)</span><span class="computeroutput">
======================================================================
ERROR: toRoman should always return uppercase
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage7\romantest71.py", line 155, in testToRomanCase
    numeral = roman71.toRoman(integer)
  File "roman71.py", line 28, in toRoman
    raise OutOfRangeError, "number out of range (must be 1..3999)"
OutOfRangeError: number out of range (must be 1..3999)</span><span class="computeroutput">
======================================================================
ERROR: fromRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage7\romantest71.py", line 102, in testFromRomanKnownValues
    result = roman71.fromRoman(numeral)
  File "roman71.py", line 47, in fromRoman
    raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s
InvalidRomanNumeralError: Invalid Roman numeral: MMMM</span><span class="computeroutput">
======================================================================
ERROR: toRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage7\romantest71.py", line 96, in testToRomanKnownValues
    result = roman71.toRoman(integer)
  File "roman71.py", line 28, in toRoman
    raise OutOfRangeError, "number out of range (must be 1..3999)"
OutOfRangeError: number out of range (must be 1..3999)</span><span class="computeroutput">
======================================================================
ERROR: fromRoman(toRoman(n))==n for all n
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage7\romantest71.py", line 147, in testSanity
    numeral = roman71.toRoman(integer)
  File "roman71.py", line 28, in toRoman
    raise OutOfRangeError, "number out of range (must be 1..3999)"
OutOfRangeError: number out of range (must be 1..3999)</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 13 tests in 2.213s

FAILED (errors=5)</span></pre></div>
               <p>ì´ì œ ìƒˆë¡œìš´ ìš”êµ¬ì¡°ê±´ ë•Œë¬¸ì— ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë“¤ì´ ìˆìœ¼ë¯€ë¡œ, ê·¸ ìš”êµ¬ì¡°ê±´ì´ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë“¤ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•  ìƒê°ì„ ê°€ì ¸ë„ ì¢‹ìŠµë‹ˆë‹¤. (ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì²˜ìŒ ì½”ë”©í•  ë•Œ ìµìˆ™í•´ ì§„ í•œ ê°€ì§€ëŠ” í…ŒìŠ¤íŠ¸ ì¤‘ì¸ ì½”ë“œëŠ” ì ˆëŒ€ë¡œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë³´ë‹¤ &#8220;<span class="quote">ë¨¼ì €</span>&#8221;ê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì¤‘ì¸ ì½”ë“œê°€ ë’¤ì— ìˆëŠ” í•œ, ì—¬ì „íˆ í•´ì•¼ í•  ì¼ì´ ìˆëŠ” ê²ƒì´ê³ , í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ë”°ë¼ ì¡ëŠ” ìˆœê°„, ì½”ë”©ì„ ë©ˆì¶¥ë‹ˆë‹¤.)
               </p>
               <div class="example"><a name="d0e34511"></a><h3 class="title">ì˜ˆì œ&nbsp;15.8.&nbsp;ìƒˆë¡œìš´ ìš”êµ¬ì¡°ê±´ì„ ì½”ë”©í•˜ëŠ” ë²• (<tt class="filename">roman72.py</tt>)
                  </h3>
                  <p>ë‹¤ìŒ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage7/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""Convert to and from Roman numerals"""
import re

#Define exceptions
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

#Define digit mapping
romanNumeralMap = (('M',  1000),
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

def toRoman(n):
    """convert integer to Roman numeral"""
    if not (0 &lt; n &lt; 5000):                                                         <a name="roman.change.3.1"></a><span class="round">â‘ </span>
        raise OutOfRangeError, "number out of range (must be 1..4999)"
    if int(n) &lt;&gt; n:
        raise NotIntegerError, "non-integers can not be converted"

    result = ""
    for numeral, integer in romanNumeralMap:
        while n &gt;= integer:
            result += numeral
            n -= integer
    return result

#Define pattern to detect valid Roman numerals
romanNumeralPattern = '^M?M?M?M?(CM|CD|D?C?C?C?)(XC|XL|L?X?X?X?)(IX|IV|V?I?I?I?)$' <a name="roman.change.3.2"></a><span class="round">â‘¡</span>

def fromRoman(s):
    """convert Roman numeral to integer"""
    if not s:
        raise InvalidRomanNumeralError, 'Input can not be blank'
    if not re.search(romanNumeralPattern, s):
        raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s

    result = 0
    index = 0
    for numeral, integer in romanNumeralMap:
        while s[index:index+len(numeral)] == numeral:
            result += integer
            index += len(numeral)
    return result
</pre></div>
               <div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="12" valign="top" align="left"><a href="#roman.change.3.1"><span class="round">â‘ </span></a> 
                        </td>
                        <td valign="top" align="left"><tt class="function">toRoman</tt>ì„ ë²”ìœ„ ì ê²€ì—ì„œ ì¡°ê¸ˆë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤. ì˜ˆì „ì—ëŠ” <tt class="literal">0 &lt; n &lt; 4000</tt>ì„ ì ê²€í–ˆì§€ë§Œ ì´ì œ <tt class="literal">0 &lt; n &lt; 5000</tt>ë¥¼ ì ê²€í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìƒˆë¡œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆëŠ” ë²”ìœ„(<tt class="literal">1..3999</tt>ëŒ€ì‹  <tt class="literal">1..4999</tt>)ë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•˜ì—¬ ì¼ìœ¼í‚¨(<tt class="literal">raise</tt>) ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°”ê¿‰ë‹ˆë‹¤. í•¨ìˆ˜ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ì „í˜€ ë°”ê¿€ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤; ì´ë¯¸ ìƒˆë¡œìš´ ì‚¬ë¡€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. (ì²œì˜ ìë¦¬ë¥¼ ë§Œë‚˜ë©´ ì¦ê²ê²Œ <tt class="literal">'M'</tt>ì„ ì¶”ê°€í•©ë‹ˆë‹¤; <tt class="literal">4000</tt>ì´ ì£¼ì–´ì§€ë©´ <tt class="literal">'MMMM'</tt>ì„ ë±‰ì•„ëƒ…ë‹ˆë‹¤.  ì•ì—ì„œ ì´ë ‡ê²Œ í•˜ì§€ ì•Šì€ ìœ ì¼í•œ ì´ìœ ëŠ” ë²”ìœ„ ì ê²€ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ë©ˆì¶”ë„ë¡ ì§€ì •í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)
                        </td>
                     </tr>
                     <tr>
                        <td width="12" valign="top" align="left"><a href="#roman.change.3.2"><span class="round">â‘¡</span></a> 
                        </td>
                        <td valign="top" align="left"><tt class="function">fromRoman</tt>ì€ ì „í˜€ ê³ ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. <tt class="varname">romanNumeralPattern</tt>ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤; ì„¸ì‹¬í•˜ê²Œ ì‚´í´ë³´ë©´ ì •ê·œ í‘œí˜„ì‹ì˜ ì²« ë¶€ë¶„ì— ì„ íƒì ì¸ <tt class="literal">M</tt>ì„ í•˜ë‚˜ ë” ì¶”ê°€í–ˆë‹¤ëŠ” ê²ƒì„ ì•„ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ì´ë ‡ê²Œ í•˜ë©´ <tt class="literal">M</tt> ë¬¸ìë¥¼ 3ê°œê°€ ì•„ë‹ˆë¼ 4ê°œê¹Œì§€ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë°, ë‹¤ì‹œ ë§í•´ <tt class="literal">3999</tt> ëŒ€ì‹ ì— <tt class="literal">4999</tt>ì™€ ë™ë“±í•œ ë¡œë§ˆ ìˆ«ìë¥¼ ì“¸ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì‹¤ì œ <tt class="function">fromRoman</tt> í•¨ìˆ˜ëŠ” ì™„ë²½í•˜ê²Œ ì¼ë°˜ì ì…ë‹ˆë‹¤; ì–¼ë§ˆë‚˜ ë§ì´ ë°˜ë³µë˜ëŠ”ì§€ ì‹ ê²½ì“°ì§€ ì•Šê³  ë°˜ë³µëœ ë¡œë§ˆ ìˆ«ì ë¬¸ìë¥¼ ê·¸ëƒ¥ ì°¾ì•„ì„œ ì¶”ê°€í•©ë‹ˆë‹¤. ì˜ˆì „ì— <tt class="literal">'MMMM'</tt>ì„ ì²˜ë¦¬í•˜ì§€ ì•Šì€ ê²ƒì€ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì¤‘ì§€ì‹œì¼°ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                        </td>
                     </tr>
                  </table>
               </div>
               <p>ì´ë ‡ê²Œ ë‘ ê°œë§Œ ì¡°ê¸ˆ ë°”ê¾¸ë©´ ëœë‹¤ëŠ” ì‚¬ì‹¤ì´ ë¯¿ì–´ì§€ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„, ì œ ë§ì„ ê³§ì´ ê³§ëŒ€ë¡œ ë¯¿ì§€ ë§ê³ ; ìŠ¤ìŠ¤ë¡œ ì•Œì•„ ë³´ì„¸ìš”:</p>
               <div class="example"><a name="roman.roman72.output"></a><h3 class="title">ì˜ˆì œ&nbsp;15.9.&nbsp;<tt class="filename">roman72.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest72.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... ok
toRoman should always return uppercase ... ok
fromRoman should fail with blank string ... ok
fromRoman should fail with malformed antecedents ... ok
fromRoman should fail with repeated pairs of numerals ... ok
fromRoman should fail with too many repeated numerals ... ok
fromRoman should give known result with known input ... ok
toRoman should give known result with known input ... ok
fromRoman(toRoman(n))==n for all n ... ok
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok

----------------------------------------------------------------------
Ran 13 tests in 3.685s

OK</span> <a name="roman.change.4.1"></a><span class="round">â‘ </span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.change.4.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ í†µê³¼í•©ë‹ˆë‹¤. ì½”ë”©ì„ ë©ˆì¶”ì„¸ìš”.</td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì¢…í•©ì ì¸ ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” &#8220;<span class="quote">ë‚˜ë¥¼ ë¯¿ì–´ìš”</span>&#8221;ë¼ê³  ë§í•˜ëŠ” í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ì ˆëŒ€ë¡œ ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
               </p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.refactoring"></a>15.3.&nbsp;ë¦¬íŒ©í† ë§</h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ìœ ë‹› í…ŒìŠ¤íŠ¸ì— ê´€í•˜ì—¬ ê°€ì¥ ì¢‹ì€ ê²ƒì€ ë§ˆì¹¨ë‚´ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ëª¨ë‘ í†µê³¼í•  ë•Œ ëŠë¼ëŠ” ê¸°ì¨ë„ ì•„ë‹ˆë©°, ì‹¬ì§€ì–´ ì½”ë“œë¥¼ ë§ê°€íŠ¸ë ¸ë‹¤ê³  ë‹¤ë¥¸ ì‚¬ëŒì´ ë‚˜ë¥¼ ë¹„ë‚œí–ˆì§€ë§Œ ì‹¤ì œë¡œëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ <span class="emphasis"><em>ì¦ëª…í–ˆì„</em></span> ë•Œì˜ ê¸°ì¨ë„ ì•„ë‹™ë‹ˆë‹¤. ìœ ë‹› í…ŒìŠ¤íŠ¸ì— ê´€í•˜ì—¬ ê°€ì¥ ì¢‹ì€ ê²ƒì€ ë°”ë¡œ ì² ì €í•˜ê²Œ ë§ˆìŒëŒ€ë¡œ ë¦¬íŒ©í† ë§ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
                  </p>
               </div>
               <p>ë¦¬íŒ©í† ë§ì€ ì‘ë™í•˜ëŠ” ì½”ë“œë¥¼ ì·¨í•´ ë” ì˜ ì‘ë™í•˜ë„ë¡ ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë³´í†µ, &#8220;<span class="quote">ë” ì˜ ì‘ë™í•œë‹¤</span>&#8221;ëŠ” ì˜ë¯¸ëŠ” &#8220;<span class="quote">ë” ë¹ ë¥´ë‹¤</span>&#8221;ëŠ” ëœ»ì…ë‹ˆë‹¤. ë¬¼ë¡ , &#8220;<span class="quote">ë©”ëª¨ë¦¬ë¥¼ ëœ ì‚¬ìš©í•œë‹¤ê±°ë‚˜</span>&#8221; &#8220;<span class="quote">ë””ìŠ¤í¬ ê³µê°„ì„ ëœ ì‚¬ìš©í•œë‹¤ê±°ë‚˜</span>&#8221;  ë˜ëŠ” ê·¸ëƒ¥ &#8220;<span class="quote">ë” ìš°ì•„í•˜ê²Œ ì‘ë™í•œë‹¤</span>&#8221;ëŠ” ëœ»ì´ê¸°ë„ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ ìƒí™©ì—ì„œ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°€ì§€ë“ , ë¦¬íŒ©í† ë§ì€ ì¥ê¸°ê°„ì˜ ê´€ì ì—ì„œ í”„ë¡œê·¸ë¨ì´ ê±´ê°•í•˜ë ¤ë©´ ì¤‘ìš”í•©ë‹ˆë‹¤.
               </p>
               <p>ì—¬ê¸°ì—ì„œ &#8220;<span class="quote">ë” ì¢‹ë‹¤</span>&#8221;ë¼ëŠ” ì˜ë¯¸ëŠ” &#8220;<span class="quote">ë” ë¹ ë¥´ë‹¤</span>&#8221;ëŠ” ëœ»ì…ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ ë§í•´, <tt class="function">fromRoman</tt> í•¨ìˆ˜ëŠ” í•„ìš” ì´ìƒ ëŠë¦½ë‹ˆë‹¤. ì„±ê°€ì‹  ì»¤ë‹¤ë€ ì •ê·œ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë¡œë§ˆ ìˆ«ìë¥¼ í‰ê°€í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì •ê·œ í‘œí˜„ì‹ì„ ì—†ì• ë ¤ëŠ” ì‹œë„ëŠ” ê°€ì¹˜ê°€ ì—†ì–´ ë³´ì…ë‹ˆë‹¤ (ì–´ë ¤ìš¸ ë¿ë§Œ ì•„ë‹ˆë¼ ë” ë¹ ë¥´ê²Œ ë ì§€ë„ ì˜ë¬¸ì…ë‹ˆë‹¤). ê·¸ëŸ¬ë‚˜ ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ë©´ í•¨ìˆ˜ë¥¼ ë” ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e34647"></a><h3 class="title">ì˜ˆì œ&nbsp;15.10.&nbsp;ì •ê·œ í‘œí˜„ì‹ ì»´íŒŒì¼í•˜ê¸°</h3><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">import re</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">pattern = '^M?M?M?$'</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">re.search(pattern, 'M')</span>               <a name="roman.refactoring.1.1"></a><span class="round">â‘ </span>
<span class="computeroutput">&lt;SRE_Match object at 01090490&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">compiledPattern = re.compile(pattern)</span> <a name="roman.refactoring.1.2"></a><span class="round">â‘¡</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">compiledPattern</span>
<span class="computeroutput">&lt;SRE_Pattern object at 00F06E28&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">dir(compiledPattern)</span>                  <a name="roman.refactoring.1.3"></a><span class="round">â‘¢</span>
<span class="computeroutput">['findall', 'match', 'scanner', 'search', 'split', 'sub', 'subn']</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">compiledPattern.search('M')</span>           <a name="roman.refactoring.1.4"></a><span class="round">â‘£</span>
<span class="computeroutput">&lt;SRE_Match object at 01104928&gt;</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì´ êµ¬ë¬¸ì€ ì•ì„œ ë³´ì•˜ìŠµë‹ˆë‹¤: <tt class="function">re.search</tt>ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ë¬¸ìì—´(<tt class="varname">pattern</tt>)ë¡œ ì·¨í•´ ê·¸ì— ìƒì‘í•˜ëŠ” ë¬¸ìì—´(<tt class="literal">'M'</tt>)ì„ ëŒë ¤ì¤ë‹ˆë‹¤. íŒ¨í„´ì´ ì¼ì¹˜í•˜ë©´ í•¨ìˆ˜ëŠ” ì¼ì¹˜ ê°ì²´ë¥¼ ëŒë ¤ì¤ë‹ˆë‹¤. ì´ ê°ì²´ì— ì§ˆì˜í•˜ë©´ ì •í™•í•˜ê²Œ ë¬´ì—‡ì´ ë¶€í•©í•˜ëŠ”ì§€ ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ë¶€í•©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.1.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ì´ëŠ” ìƒˆë¡œìš´ êµ¬ë¬¸ì…ë‹ˆë‹¤: <tt class="function">re.compile</tt>ì€ ì •ê·œ í‘œí˜„ì‹ì„ ë¬¸ìì—´ë¡œ ì·¨í•´ íŒ¨í„´ ê°ì²´ë¥¼ ëŒë ¤ì¤ë‹ˆë‹¤. ì—¬ê¸°ì— ë¶€í•©í•˜ëŠ” ë¬¸ìì—´ì´ ì—†ìŒì„ ì£¼ëª©í•˜ì„¸ìš”. ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ëŠ” ê²ƒì€ (ì˜ˆë¥¼ ë“¤ë©´ <tt class="literal">'M'</tt> ê°™ì€) íŠ¹ì •í•œ ë¬¸ìì—´ì— ëŒ€í•˜ì—¬ ì¼ì¹˜ì‹œí‚¤ëŠ” ê²ƒê³¼ ì „í˜€ ê´€ê³„ê°€ ì—†ìŠµë‹ˆë‹¤; ì˜¤ì§ ì •ê·œ ê·¸ ìì²´ì—ë§Œ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.1.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="function">re.compile</tt>ì´ ëŒë ¤ì£¼ëŠ” ì»´íŒŒì¼ëœ íŒ¨í„´ ê°ì²´ëŠ” ìœ ìš©í•´ ë³´ì´ëŠ” í•¨ìˆ˜ê°€ ì—¬ëŸ¿ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” <tt class="filename">re</tt> ëª¨ë“ˆì—ì„œ (<tt class="function">search</tt> ê·¸ë¦¬ê³  <tt class="function">sub</tt> ê°™ì´) ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ¥í•œ ì—¬ëŸ¬ í•¨ìˆ˜ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.1.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ë¬¸ìì—´  <tt class="literal">'M'</tt>ì„ ê°€ì§€ê³  ì»´íŒŒì¼ëœ íŒ¨í„´ ê°ì²´ì˜ <tt class="function">search</tt> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì •ê·œí‘œí˜„ì‹ê³¼ ë¬¸ìì—´ <tt class="literal">'M'</tt>ì„ ê°€ì§€ê³  <tt class="function">re.search</tt> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒê³¼ ë˜‘ ê°™ì€ íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤. ì˜¤ì§ ë” ë¹ ë¥¼ ë¿ì…ë‹ˆë‹¤.  (ì‹¤ì œë¡œ, <tt class="function">re.search</tt> í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ë¶„ ëŒ€ì‹  ê·¸ëƒ¥ ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•´ì„œ ê·¸ ê²°ê³¼ íŒ¨í„´ ê°ì²´ì˜ <tt class="function">search</tt> ë©”ì˜ë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.)
                           </td>
                        </tr>
                     </table>
                  </div>
               </div><a name="d0e34764"></a><table class="note" border="0" summary="">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="1%"><span class="roundNote">â˜</span></td>
                  </tr>
                  <tr>
                     <td colspan="2" align="left" valign="top" width="99%">ì •ê·œ í‘œí˜„ì‹ì„ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ìƒê°ì´ë¼ë©´ ì»´íŒŒì¼í•´ì„œ íŒ¨í„´ ê°ì²´ë¥¼ ì–»ì€ ë‹¤ìŒ, ê·¸ íŒ¨í„´ ê°ì²´ì— ì§ì ‘ ë©”ì˜ë“œë¥¼ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤.
                     </td>
                  </tr>
               </table>
               <div class="example"><a name="d0e34769"></a><h3 class="title">ì˜ˆì œ&nbsp;15.11.&nbsp;<tt class="filename">roman81.py</tt>ì˜ ì»´íŒŒì¼ëœ ì •ê·œ í‘œí˜„ì‹</h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage8/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ì˜ˆì œë¥¼</a> ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
# toRoman ê·¸ë¦¬ê³  ë‚˜ë¨¸ì§€ ëª¨ë“ˆì€ ê¹¨ë—í•˜ê²Œ ìƒëµí•¨.

romanNumeralPattern = \
    re.compile('^M?M?M?M?(CM|CD|D?C?C?C?)(XC|XL|L?X?X?X?)(IX|IV|V?I?I?I?)$') <a name="roman.refactoring.2.1"></a><span class="round">â‘ </span>

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    if not s:
        raise InvalidRomanNumeralError, 'Input can not be blank'
    if not romanNumeralPattern.search(s):                                    <a name="roman.refactoring.2.2"></a><span class="round">â‘¡</span>
        raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s

    result = 0
    index = 0
    for numeral, integer in romanNumeralMap:
        while s[index:index+len(numeral)] == numeral:
            result += integer
            index += len(numeral)
    return result
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì•„ì£¼ ë¹„ìŠ·í•˜ê²Œ ë³´ì´ì§€ë§Œ ì‚¬ì‹¤ì€ ë§ì€ ê²ƒì´ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤.  <tt class="varname">romanNumeralPattern</tt>ì€ ë” ì´ìƒ ë¬¸ìì—´ì´ ì•„ë‹™ë‹ˆë‹¤; <tt class="function">re.compile</tt>ë¡œë¶€í„° ë°˜í™˜ëœ íŒ¨í„´ ê°ì²´ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ì¦‰ <tt class="varname">romanNumeralPattern</tt>ì— ì§ì ‘ì ìœ¼ë¡œ ë©”ì˜ë“œë¥¼ ìš”ì²­í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ë§¤ë²ˆ  <tt class="function">re.search</tt>ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒë³´ë‹¤ ì´ í¸ì´ í›¨ì”¬ ë” ë¹ ë¦…ë‹ˆë‹¤. ëª¨ë“ˆì´ ì²˜ìŒ ë„ì…ë  ë•Œ ì •ê·œ í‘œí˜„ì‹ì€ í•œë²ˆ ì»´íŒŒì¼ë˜ì–´ <tt class="varname">romanNumeralPattern</tt>ì— ì €ì¥ë©ë‹ˆë‹¤; ê·¸ëŸ¬ë©´ <tt class="function">fromRoman</tt>ì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤, ì •ê·œ í‘œí˜„ì‹ì— ëŒ€í•˜ì—¬ ì…ë ¥ ë¬¸ìì—´ì„ ì¦‰ì‹œ ì¼ì¹˜ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëšœê»‘ ì•„ë˜ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¤‘ê°„ ë‹¨ê³„ë¥¼ ê±°ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ê·¸ë˜ì„œ ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ë©´ ì–¼ë§ˆë‚˜ ë¹ ë¥¸ê°€? ìŠ¤ìŠ¤ë¡œ ì•Œì•„ ë³´ì„¸ìš”:</p>
               <div class="example"><a name="roman.stage8.1.output"></a><h3 class="title">ì˜ˆì œ&nbsp;15.12.&nbsp;<tt class="filename">roman81.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest81.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">.............          </span><a name="roman.refactoring.3.1"></a><span class="round">â‘ </span><span class="computeroutput">
----------------------------------------------------------------------
Ran 13 tests in 3.385s </span><a name="roman.refactoring.3.2"></a><span class="round">â‘¡</span><span class="computeroutput">

OK</span>                     <a name="roman.refactoring.3.3"></a><span class="round">â‘¢</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.3.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì§€ë‚˜ëŠ” ê¸¸ì— í•œë§ˆë”” í•˜ìë©´: ì´ë²ˆì—ëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ <tt class="option">-v</tt> ì˜µì…˜ <span class="emphasis"><em> ì—†ì´</em></span> ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ í†µê³¼í•˜ë©´ ì™„ì „í•œ ë¬¸ì„œí™” ë¬¸ìì—´<tt class="literal"></tt> ëŒ€ì‹ ì— ì ë§Œ ë‚˜ì˜µë‹ˆë‹¤.  (í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ë©´ <tt class="literal">F</tt>ê°€ ë‚˜ì˜¤ê³ , ì—ëŸ¬ì´ë©´ <tt class="literal">E</tt>ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤. ì—¬ì „íˆ ì—ëŸ¬ì™€ ì‹¤íŒ¨ë§ˆë‹¤ ì™„ë²½í•˜ê²Œ ì—­ì¶”ì ì„ ì–»ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì–´ë–¤ ë¬¸ì œë“ ì§€ ì¶”ì í•´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.3.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="literal">13</tt>ê°œì˜ í…ŒìŠ¤íŠ¸ê°€ <tt class="literal">3.385</tt> ì´ˆì— ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ê·œ í‘œí˜„ì‹ì„ ë¯¸ë¦¬ ì»´íŒŒì¼í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° <a href="#roman.roman72.output" title="Example&nbsp;15.9.&nbsp;Output of romantest72.py against roman72.py"><tt class="literal">3.685</tt> ì´ˆ</a>ê°€ ê±¸ë¦° ê²ƒì— ë¹„í•´ì„œ ë§ì…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ <tt class="literal">8%</tt>ê°€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ì–µí•˜ì„¸ìš”. ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¤‘ì— ì†Œë¹„ëœ ì‹œê°„ì€ ëŒ€ë¶€ë¶„ ë‹¤ë¥¸ ì¼ì„ í•˜ëŠ”ë° ì†Œë¹„ëœ ì‹œê°„ì…ë‹ˆë‹¤. (ë‚˜ë¨¸ì§€ ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ ë–¼ì–´ì„œ, ë³„ë„ë¡œ ì •ê·œ í‘œí˜„ì‹ë§Œ ì‹œê°„ì„ ì¬ì–´ ë³´ì•˜ëŠ”ë°, ì´ ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ë©´ ê²€ìƒ‰(<tt class="function">search</tt>) ì†ë„ê°€ í‰ê·  <tt class="literal">54%</tt>ê°€ëŸ‰ ì¦ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.)  ê°„ë‹¨íˆ ê³ ì¹œ ì •ë„ì— ë¹„í•´ ë‚˜ì˜ì§€ ì•Šì€ ê²°ê³¼ì…ë‹ˆë‹¤. 
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.3.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">í˜¹ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ì •ê·œ í‘œí˜„ì‹ì„ ë¯¸ë¦¬ ì»´íŒŒì¼í•˜ë”ë¼ë„ ì•„ë¬´ê²ƒë„ ë§ê°€íŠ¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°©ê¸ˆ ì¦ëª…ë˜ì—ˆë“¯ì´ ë§ì…ë‹ˆë‹¤.</td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì‹œë„í•´ ë³´ê³  ì‹¶ì€ ìµœì í™”ê°€ í•œê°€ì§€ ë” ìˆìŠµë‹ˆë‹¤. ì •ê·œ í‘œí˜„ì‹ì€ ë³µì¡í•˜ë¯€ë¡œ, ê°™ì€ í‘œí˜„ì‹ì„ ì‘ì„±í•˜ëŠ”ë° ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤ê³  í•˜ë”ë¼ë„ ë³„ë¡œ ë†€ë¼ìš´ ì¼ì€ ì•„ë‹™ë‹ˆë‹¤. ì´ ëª¨ë“ˆì— ê´€í•˜ì—¬ <a href="http://groups.google.com/groups?group=comp.lang.python">comp.lang.python</a>ì—ì„œ í† ë¡ ì´ ìˆì€ í›„, ì–´ë–¤ ì‚¬ëŒì´ ì €ì—ê²Œ ì„ íƒì ì¸ ë°˜ë³µ ë¬¸ìëŒ€ì‹ ì— <tt class="literal">{<i class="replaceable">m</i>,<i class="replaceable">n</i>}</tt> êµ¬ë¬¸ì„ ì‹œë„í•´ ë³´ë¼ê³  ì œì•ˆí•˜ì˜€ìŠµë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e34895"></a><h3 class="title">ì˜ˆì œ&nbsp;15.13.&nbsp;<tt class="filename">roman82.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage8/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ì˜ˆì œë¥¼ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</a>.
                  </p><pre class="programlisting">
# ë‚˜ë¨¸ì§€ í”„ë¡œê·¸ë¨ì€ ê¹¨ë—í•˜ê²Œ ìƒëµí•¨.

# ì˜ˆì „ ë²„ì „.
#romanNumeralPattern = \
#   re.compile('^M?M?M?M?(CM|CD|D?C?C?C?)(XC|XL|L?X?X?X?)(IX|IV|V?I?I?I?)$')

# ìƒˆë¡œìš´ ë²„ì „.
romanNumeralPattern = \
    re.compile('^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$') <a name="roman.refactoring.4.1"></a><span class="round">â‘ </span>
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.4.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="literal">M?M?M?M?</tt>ê°€ <tt class="literal">M{0,4}</tt>ë¡œ êµì²´ë˜ì—ˆìŠµë‹ˆë‹¤. ë‘˜ ë‹¤ ê°™ì€ ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤: &#8220;<span class="quote">0 ê°œì—ì„œ 4 ê°œê¹Œì§€ì˜ <tt class="literal">M</tt> ë¬¸ìì— ë¶€í•©í•œë‹¤</span>&#8221;ëŠ” ëœ»ì…ë‹ˆë‹¤. ë¹„ìŠ·í•˜ê²Œ, <tt class="literal">C?C?C?</tt>ëŠ” <tt class="literal">C{0,3}</tt>ì´ ë˜ì—ˆìŠµë‹ˆë‹¤ (&#8220;<span class="quote">0ê°œ 3ê°œ ê¹Œì§€ì˜ <tt class="literal">C</tt> ë¬¸ì</span>&#8221;). ê·¸ë¦¬ê³  ë“±ë“± <tt class="literal">X</tt>ì™€ <tt class="literal">I</tt>ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì´ëŸ° í˜•íƒœì˜ ì •ê·œ í‘œí˜„ì‹ì´ ì•½ê°„ ë” ì§§ìŠµë‹ˆë‹¤ (ë¬¼ë¡  ê°€ë…ì„±ì€ í˜„ì €íˆ ë–¨ì–´ì§€ì§€ë§Œ ë§ì…ë‹ˆë‹¤). í° ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ê³¼ì—° ë” ë¹ ë¥¸ê°€?</p>
               <div class="example"><a name="d0e34949"></a><h3 class="title">ì˜ˆì œ&nbsp;15.14.&nbsp;<tt class="filename">roman82.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest82.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">.............
----------------------------------------------------------------------
Ran 13 tests in 3.315s </span><a name="roman.refactoring.5.1"></a><span class="round">â‘ </span><span class="computeroutput">

OK</span>                     <a name="roman.refactoring.5.2"></a><span class="round">â‘¡</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.5.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì „ë°˜ì ìœ¼ë¡œ, ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ì´ í˜•íƒœì˜ ì •ê·œ í‘œí˜„ì‹ìœ¼ë¡œ 2% ë” ë¹ ë¥´ê²Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë“¤ëœ° ì¼ì€ ì•„ë‹ˆì§€ë§Œ <tt class="function">search</tt> í•¨ìˆ˜ëŠ” ì „ì²´ ìœ ë‹› í…ŒìŠ¤íŠ¸ì—ì„œ ì‘ì€ ë¶€ë¶„ì„ì„ ê¸°ì–µí•˜ì„¸ìš”; ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì€ ë‹¤ë¥¸ ì¼ì„ í•˜ëŠ” ë° ì†Œë¹„ë©ë‹ˆë‹¤.  (ë”°ë¡œ, ì´ ì •ê·œ í‘œí˜„ì‹ì˜ ì‹œê°„ì„ ì¬ì–´ë³´ì•˜ëŠ”ë°, <tt class="function">search</tt> í•¨ìˆ˜ê°€ ì´ êµ¬ë¬¸ìœ¼ë¡œ í•˜ë©´ <tt class="literal">11%</tt> ë” ë¹¨ëìŠµë‹ˆë‹¤.)  ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ê³  ê·¸ ì¼ë¶€ë¥¼ ì¬ì‘ì„±í•˜ì—¬ ì´ ìƒˆë¡œìš´ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì˜€ë”ë‹ˆ, ì •ê·œ í‘œí˜„ì‹ì˜ ìˆ˜í–‰ì„±ëŠ¥ì´ <tt class="literal">60%</tt>ê°€ ë„˜ê²Œ ê°œì„ ë˜ì—ˆìœ¼ë©°, ì „ì²´ ìœ ë‹› í…ŒìŠ¤íŠ¸ì˜ ì„±ëŠ¥ì´ ì „ë°˜ì ìœ¼ë¡œ <tt class="literal">10%</tt> ì´ìƒ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.5.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ìˆ˜í–‰ ì†ë„ì˜ ê°œì„ ë³´ë‹¤ ë” ì¤‘ìš”í•œ ê²ƒì€ ëª¨ë“ˆì´ ì—¬ì „íˆ ì™„ë²½í•˜ê²Œ ì‘ë™í•œë‹¤ëŠ” ì‚¬ì‹¤ì…ë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ì´ì „ì— ì œê°€ ì–¸ê¸‰í–ˆë˜ ììœ ë¡œì›€ì…ë‹ˆë‹¤: ììœ ë¡­ê²Œ ì¡°ì‘í•˜ê³  ë°”ê¾¸ë©° ë˜ëŠ” ê·¸ ì¼ë¶€ë¥¼ ë§ˆìŒëŒ€ë¡œ ì¬ì‘ì„±í•˜ë”ë¼ë„ ê·¸ ê³¼ì •ì—ì„œ ì•„ë¬´ê²ƒë„ ì–´ì§€ëŸ½íˆì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ í™•ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ ì´ê²ƒì´ ì˜¤ì§ ì¡°ì‘ì„ ìœ„í•œ ì¡°ì‘ìœ¼ë¡œ ì½”ë“œë¥¼ ëŠì„ì—†ì´ ë°”ê¾¸ì–´ë„ ëœë‹¤ëŠ” ëœ»ì€ ì•„ë‹™ë‹ˆë‹¤; (&#8220;<span class="quote"><tt class="function">fromRoman</tt>ì„ ë” ë¹ ë¥´ê²Œ í•œë‹¤ëŠ”</span>&#8221;) êµ¬ì²´ì ì¸ ëª©ì ì´ ìˆì—ˆê³ , ê·¸ ê³¼ì •ì—ì„œ ìƒˆë¡œìš´ ë²„ê·¸ë¥¼ ì•¼ê¸°í• ì§€ì— ê´€í•˜ì—¬ í•œ ì  ì˜í˜¹ì—†ì´ ëª©í‘œë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>í•œê°€ì§€ ë” ì¡°ì‘í•˜ê³  ì‹¶ì€ ê²ƒì´ ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒë§Œ ëë‚˜ë©´ ë¦¬íŒ©í† ë§ì„ ë©ˆì¶”ê³  ì´ ëª¨ë“ˆì„ ì ì¬ìš°ê¸°ë¡œ ì•½ì†í•©ë‹ˆë‹¤. ë°˜ë³µì ìœ¼ë¡œ ë³´ì…¨ë“¯ì´, ì •ê·œ í‘œí˜„ì‹ì€ ìˆœì‹ê°„ì— ë‚œì¡í•´ì ¸ì„œ ì½ê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤. 6ê°œì›” í›„ ì´ ëª¨ë“ˆì„ ë‹¤ì‹œ ë³´ë©´ì„œ ìœ ì§€ë³´ìˆ˜í•˜ê³  ì‹¶ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¬¼ë¡ , í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” í†µê³¼í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì‘ë™í•œë‹¤ëŠ” ê²ƒì€ ì•Œì§€ë§Œ <span class="emphasis"><em>ì–´ë–»ê²Œ</em></span> ì‘ë™í•˜ëŠ”ì§€ëŠ” ì•Œì§€ ëª»í•˜ë©°, ìƒˆë¡œìš´ íŠ¹ì§•ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìœ ì§€ë³´ìˆ˜í•˜ëŠ” ì¼ì€ ì—¬ì „íˆ ì–´ë ¤ìš´ ì¼ì…ë‹ˆë‹¤. <a href="http://coreapython.hosting.paran.com/dive/chap07.html#re.verbose" title="7.5.&nbsp;Verbose Regular Expressions">ì„¹ì…˜&nbsp;7.5, &#8220;ìƒì„¸í•œ ì •ê·œ í‘œí˜„ì‹&#8221;</a>ì—ì„œ ë³´ì…¨ë“¯ì´, <span class="application">íŒŒì´ì¬</span>ì€ ë¡œì§ì„ ì¤„ ë‹¨ìœ„ë¡œ ì„¤ëª…í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e35003"></a><h3 class="title">ì˜ˆì œ&nbsp;15.15.&nbsp;<tt class="filename">roman83.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage8/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ì˜ˆì œë¥¼ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</a>.
                  </p><pre class="programlisting">
# ê¹¨ë—í•˜ê²Œ ë‚˜ë¨¸ì§€ í”„ë¡œê·¸ë¨ì€ ìƒëµ.

# ì˜ˆì „ ë²„ì „
#romanNumeralPattern = \
#   re.compile('^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$')

# ìƒˆë¡œìš´ ë²„ì „
romanNumeralPattern = re.compile('''
    ^                   # ë¬¸ìì—´ì˜ ì²˜ìŒ,
    M{0,4}              # ì²œì˜ ìë¦¬ - 0 to 4 M's
    (CM|CD|D?C{0,3})    # ë°±ì˜ ìë¦¬ - 900 (CM), 400 (CD), 0-300 (0ê°œì—ì„œ 3ê°œ ê¹Œì§€ì˜ C),
                        #           ë˜ëŠ” 500-800 (D, ë‹¤ìŒ 0ê°œì—ì„œ 3ê°œê¹Œì§€ì˜ Cê°€ ë”°ë¥¸ë‹¤)
    (XC|XL|L?X{0,3})    # ì‹­ì˜ ìë¦¬ - 90 (XC), 40 (XL), 0-30 (0ê°œì—ì„œ 3ê°œ ê¹Œì§€ì˜ X),
                        #           ë˜ëŠ” 50-80 (L, ë‹¤ìŒì— 0ê°œì—ì„œ 3ê°œê¹Œì§€ì˜ Xê°€ ë”°ë¥¸ë‹¤)
    (IX|IV|V?I{0,3})    # ì¼ì˜ ìë¦¬ - 9 (IX), 4 (IV), 0-3 (0ê°œì—ì„œ 3ê°œê¹Œì§€ì˜ I),
                        #           ë˜ëŠ” 5-8 (V, ë‹¤ìŒì— 0ê°œì—ì„œ 3ê°œê¹Œì§€ì˜ Iì´ ë”°ë¥¸ë‹¤)
    $                   # ë¬¸ìì—´ì˜ ë.
    ''', re.VERBOSE) <a name="roman.refactoring.6.1"></a><span class="round">â‘ </span>
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.6.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="function">re.compile</tt> í•¨ìˆ˜ëŠ” ì„ íƒì ìœ¼ë¡œ ë‘ ë²ˆì§¸ ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì»´íŒŒì¼ëœ ì •ê·œ í‘œí˜„ì‹ì„ í†µì œí•˜ëŠ” ë‹¤ì–‘í•œ ì˜µì…˜ì´ ì§€ì •ëœ í”Œë˜ê·¸ ì§‘í•©ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ <tt class="literal">re.VERBOSE</tt> í”Œë˜ê·¸ë¥¼ ì§€ì •í•˜ëŠ”ë°, ì´ëŠ” ì •ê·œ í‘œí˜„ì‹ ì•ˆì— ì¸-ë¼ì¸ ì£¼ì„ì´ ìˆë‹¤ê³  <span class="application">íŒŒì´ì¬</span>ì—ê²Œ ì•Œë ¤ì¤ë‹ˆë‹¤. ì£¼ì„ê³¼ ê·¸ë¥¼ ë‘˜ëŸ¬ì‹¼ ëª¨ë“  ê³µë°±ì€ ì •ê·œ í‘œí˜„ì‹ì— <span class="emphasis"><em>í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤ê³ </em></span> ê°„ì£¼ë©ë‹ˆë‹¤; <tt class="function">re.compile</tt> í•¨ìˆ˜ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•  ë•Œ ë‹¨ìˆœíˆ ê·¸ ëª¨ë“  ê³µë°±ì„ ê±·ì–´ëƒ…ë‹ˆë‹¤. ì´ ìƒˆë¡œìš´ &#8220;<span class="quote">ìƒì„¸(verbose)</span>&#8221; ë²„ì „ì€ ì˜ˆì „ ë²„ì „ê³¼ ë™ì¼í•˜ì§€ë§Œ ì½ê¸°ê°€ í™•ì‹¤íˆ ë” ì¢‹ìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <div class="example"><a name="d0e35043"></a><h3 class="title">ì˜ˆì œ&nbsp;15.16.&nbsp;<tt class="filename">roman83.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest83.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">.............
----------------------------------------------------------------------
Ran 13 tests in 3.315s </span><a name="roman.refactoring.7.1"></a><span class="round">â‘ </span><span class="computeroutput">

OK</span>                     <a name="roman.refactoring.7.2"></a><span class="round">â‘¡</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.7.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì´ ìƒˆë¡œìš´ &#8220;<span class="quote">ìƒì„¸(verbose)</span>&#8221; ë²„ì „ì€ ì˜ˆì „ ë²„ì „ê³¼ ë˜‘ ê°™ì€ ì†ë„ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì‹¤ì œë¡œ, ì»´íŒŒì¼ëœ íŒ¨í„´ ê°ì²´ëŠ” ë˜‘ê°™ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´  <tt class="function">re.compile</tt> í•¨ìˆ˜ê°€ ì¶”ê°€ëœ ëª¨ë“  ê²ƒë“¤ì„ ê±·ì–´ë‚´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.refactoring.7.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ì´ ìƒˆë¡œìš´ &#8220;<span class="quote">ìƒì„¸(verbose)</span>&#8221; ë²„ì „ì€ ì˜ˆì „ ë²„ì „ê³¼ ë˜‘ ê°™ì´ í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í†µê³¼í•©ë‹ˆë‹¤. ì•„ë¬´ ê²ƒë„ ë³€í•œ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤. ë‹¨, ì´ë¥¼ ì‘ì„±í•œ í”„ë¡œê·¸ë˜ë¨¸ê°€ 6ê°œì›” í›„ì— ì´ ëª¨ë“ˆì„ ë‹¤ì‹œ ë³´ê²Œë˜ë©´ í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì´í•´ì— ë„ì „í•´ ë³¼ ê¸°íšŒê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.postscript"></a>15.4.&nbsp;ë§ºëŠ” ë§
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ì´ëª…í•œ ë…ìë¼ë©´ <a href="#roman.refactoring" title="15.3.&nbsp;Refactoring">ì• ì„¹ì…˜</a>ì„ ì½ê³  ë” ë†’ì€ ìˆ˜ì¤€ìœ¼ë¡œ ëŒì–´ ì˜¬ë¦¬ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ ì‘ì„±ëœ í”„ë¡œê·¸ë¨ì—ì„œ ì‹¬ê°í•œ ê³¨ì¹˜ê±°ë¦¬ (ê·¸ë¦¬ê³  ìˆ˜í–‰ì„±ëŠ¥ì˜ ì €í•˜ ìš”ì¸)ëŠ” ì •ê·œ í‘œí˜„ì‹ì…ë‹ˆë‹¤. ì •ê·œ í‘œí˜„ì‹ì´ í•„ìš”í•œ ì´ìœ ëŠ” ë¡œë§ˆ ìˆ«ìë¥¼ ë¶„í•´í•  ë°©ë²•ì´ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¡œë§ˆ ìˆ«ìëŠ” ì—¬ê¸°ì—ì„œ ê²¨ìš° 5000ê°œì— ë¶ˆê³¼í•©ë‹ˆë‹¤; ê²€ìƒ‰ í…Œì´ë¸”ì„ í•œ ë²ˆ ë§Œë“¤ì–´ ë†“ê³ , ê·¸ëƒ¥ ì½ìœ¼ë©´ ì•ˆë ê¹Œìš”? ì •ê·œ í‘œí˜„ì‹ì´ ì „í˜€ í•„ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ì‚¬ì‹¤ì„ ìƒê°í•´ ë³´ë©´  ì´ ìƒê°ì€ ë” ì¢‹ìŠµë‹ˆë‹¤. ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” ê²€ìƒ‰ í…Œì´ë¸”ì„ êµ¬ì¶•í•˜ë‹¤ ë³´ë©´ ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ì—­ê²€ìƒ‰ í…Œì´ë¸”ë„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p>
               </div>
               <p>ë¬´ì—‡ë³´ë‹¤ë„ ì´ë¯¸ ì™„ë²½í•˜ê²Œ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ê°–ì¶”ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“ˆì—ì„œ ì½”ë“œì˜ ë°˜ ì´ìƒì„ ë°”ê¾¸ì—ˆì§€ë§Œ ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ì—¬ì „íˆ ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì½”ë“œê°€ ì›ë˜ì™€ ë˜‘ ê°™ì´ ì‘ë™í•œë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e35088"></a><h3 class="title">ì˜ˆì œ&nbsp;15.17.&nbsp;<tt class="filename">roman9.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage9/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ì˜ˆì œë¥¼ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</a>.
                  </p><pre class="programlisting">
# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

# ë¡œë§ˆ ìˆ«ìëŠ” 5000 ë¯¸ë§Œì´ì–´ì•¼ í•œë‹¤
MAX_ROMAN_NUMERAL = 4999

# ìë¦¬ìˆ˜ ì§ì§“ê¸°ë¥¼ ì •ì˜í•œë‹¤
romanNumeralMap = (('M',  1000),
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

# ë¡œë§ˆ ìˆ«ìë¥¼ ë¹ ë¥´ê²Œ ë³€í™˜í•˜ê¸° ìœ„í•´ í‘œë¥¼ ë§Œë“ ë‹¤.
# ì•„ë˜ì˜ fillLookupTables() ì°¸ì¡°.
toRomanTable = [ None ]  # ë¡œë§ˆ ìˆ«ìëŠ” 0ì´ ì—†ìœ¼ë¯€ë¡œ ì§€í‘œë¥¼ ê±´ë„ˆë›´ë‹¤
fromRomanTable = {}

def toRoman(n):
    """ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    if not (0 &lt; n &lt;= MAX_ROMAN_NUMERAL):
        raise OutOfRangeError, "number out of range (must be 1..%s)" % MAX_ROMAN_NUMERAL
    if int(n) &lt;&gt; n:
        raise NotIntegerError, "non-integers can not be converted"
    return toRomanTable[n]

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    if not s:
        raise InvalidRomanNumeralError, "Input can not be blank"
    if not fromRomanTable.has_key(s):
        raise InvalidRomanNumeralError, "Invalid Roman numeral: %s" % s
    return fromRomanTable[s]

def toRomanDynamic(n):
    """ë™ì  í”„ë¡œê·¸ë˜ë°ì„ ì‚¬ìš©í•˜ì—¬ ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    result = ""
    for numeral, integer in romanNumeralMap:
        if n &gt;= integer:
            result = numeral
            n -= integer
            break
    if n &gt; 0:
        result += toRomanTable[n]
    return result

def fillLookupTables():
    """ê°€ëŠ¥í•œ ëª¨ë“  ë¡œë§ˆ ìˆ«ìë¥¼ ê³„ì‚°í•œë‹¤"""
    # ì •ìˆ˜ë¡œ ìƒí˜¸ ë³€í™˜í•˜ê¸° ìœ„í•˜ì—¬ ê°’ì„ ë‘ ê°œì˜ ì „ì—­ í…Œì´ë¸”ì— ì €ì¥í•œë‹¤.
    for integer in range(1, MAX_ROMAN_NUMERAL + 1):
        romanNumber = toRomanDynamic(integer)
        toRomanTable.append(romanNumber)
        fromRomanTable[romanNumber] = integer

fillLookupTables()
</pre></div>
               <p>ê·¸ë˜ì„œ ì–¼ë§ˆë‚˜ ë” ë¹ ë¥¸ê°€?</p>
               <div class="example"><a name="d0e35106"></a><h3 class="title">ì˜ˆì œ&nbsp;15.18.&nbsp;<tt class="filename">roman9.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest9.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen">
<span class="computeroutput">
.............
----------------------------------------------------------------------
Ran 13 tests in 0.791s

OK
</span>
</pre></div>
               <p>ê¸°ì–µí•˜ì„¸ìš”. ì›ë˜ ë²„ì „ì—ì„œ ì–»ì€ ìµœê³ ì˜ ìˆ˜í–‰ì„±ëŠ¥ì€ 13ê°œì˜ í…ŒìŠ¤íŠ¸ë¥¼ 3.315 ì´ˆì— ì‹¤í–‰í•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë¬¼ë¡ , ì „ì ìœ¼ë¡œ ê³µì •í•œ ë¹„êµëŠ” ì•„ë‹™ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ ë²„ì „ì€ (ê²€ìƒ‰ í…Œì´ë¸”ì„ ì±„ìš¸ ë•Œ) ë°˜ì…ì— ì‹œê°„ì´ ë” ê±¸ë¦¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë°˜ì…ì€ í•œ ë²ˆë§Œ í•˜ë©´ ë˜ê³ , ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ë¬´ì‹œí•´ë„ ì¢‹ìŠµë‹ˆë‹¤.
               </p>
               <p>ì´ì•¼ê¸°ì—ì„œ ì–»ëŠ” êµí›ˆì€ ë¬´ì—‡ì¸ê°€?</p>
               <div class="itemizedlist">
                  <ul>
                     <li>ë‹¨ìˆœí•¨ì´ ë¯¸ë•ì´ë‹¤.</li>
                     <li>íŠ¹íˆ ì •ê·œ í‘œí˜„ì‹ì´ ê´€ë ¨ë˜ë©´ ë” ê·¸ë ‡ë‹¤.</li>
                     <li>ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í™•ì‹ ì„ ê°€ì§€ê³  ë°©ëŒ€í•œ-í¬ê¸°ì˜ ë¦¬íŒ©í† ë§ì„ í•  ìˆ˜ ìˆë‹¤... ë¹„ë¡ ì›ë˜ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ ìˆì§€ ì•Šë”ë¼ë„ ë§ì´ë‹¤.</li>
                  </ul>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.summary"></a>15.5.&nbsp;ìš”ì•½
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ê°•ë ¥í•œ ê°œë…ì…ë‹ˆë‹¤. ì œëŒ€ë¡œ êµ¬í˜„í•˜ë©´ ìœ ì§€ê´€ë¦¬ ë¹„ìš©ë„ ì¤„ê³  ì¥ê¸° í”„ë¡œì íŠ¸ì—ì„œ ìœ ì—°ì„±ë„ í–¥ìƒë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ë§Œë³‘í†µì¹˜ì•½ì´ ì•„ë‹™ë‹ˆë‹¤. ë§ˆë²•ì˜ ë¬¸ì œ í•´ê²°ì‚¬ ë˜ëŠ” ì€ë¹› íƒ„í™˜ì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì´í•´í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¢‹ì€ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ì‘ì„±í•˜ëŠ” ì¼ì€ ì–´ë ¤ìš°ë©°, ìµœì‹ ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ì¼ì€ (íŠ¹íˆ ê³ ê°ì´ ì‹¬ê°í•œ ë²„ê·¸ ìˆ˜ì •ì„ ìš”êµ¬í•  ë•Œ) ì ˆì œê°€ í•„ìš”í•©ë‹ˆë‹¤. ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ê¸°ëŠ¥ì  í…ŒìŠ¤íŒ…ê³¼ í†µí•© í…ŒìŠ¤íŒ… ê·¸ë¦¬ê³  ì‚¬ìš©ì ìŠ¹ì¸ í…ŒìŠ¤íŒ…ì„ ë¹„ë¡¯í•˜ì—¬, ê¸°íƒ€ ë‹¤ë¥¸ í˜•íƒœì˜ í…ŒìŠ¤íŠ¸ë¥¼ ëŒ€ì‹ í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê·¸ëŸ´ì‹¸í•´ ë³´ì´ê³  ì‘ë™í•˜ë©° ì¼ë‹¨ ì‘ë™ì‹œì¼œ ë³´ë©´ ê·¸ ë™ì•ˆ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì—†ì´ ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ì§€ ê°íƒ„í•  ê²ƒì…ë‹ˆë‹¤.
                  </p>
               </div>
               <p>ì´ ì¥ì€ ê¸°ì´ˆë¥¼ ë§ì´ ë‹¤ë£¨ì—ˆìœ¼ë©°, ìƒë‹¹ìˆ˜ëŠ” ì‹¬ì§€ì–´ <span class="application">íŒŒì´ì¬</span>ì—-íŠ¹ì •í•œ ê²ƒë„ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. ë§ì€ ì–¸ì–´ì— ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì—…í‹€ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ ëª¨ë“  ì‘ì—…í‹€ì—ì„œ ë˜‘ê°™ì´ ìš”êµ¬í•˜ëŠ” ê¸°ë³¸ì ì¸ ê°œë…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
               </p>
               <div class="highlights">
                  <div class="itemizedlist">
                     <ul>
                        <li>êµ¬ì²´ì ì´ê³  ìë™í™”ë˜ì—ˆìœ¼ë©° ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ë””ìì¸í•˜ëŠ” ë²•</li>
                        <li>í…ŒìŠ¤íŠ¸í•  ì½”ë“œë³´ë‹¤ <span class="emphasis"><em>ë¨¼ì €</em></span> í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ì‘ì„±í•˜ëŠ” ë²•</li>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.success" title="13.4.&nbsp;Testing for success">ì¢‹ì€ ì…ë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³ </a> ì ì ˆí•œ ê²°ê³¼ì¸ì§€ ì ê²€í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸°
                        </li>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.failure" title="13.5.&nbsp;Testing for failure">ë‚˜ìœ ì…ë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³ </a> ì ì ˆí•˜ê²Œ ì‹¤íŒ¨í•˜ëŠ”ì§€ ì ê²€í•˜ê¸°
                        </li>
                        <li><a href="#roman.bugs" title="15.1.&nbsp;Handling bugs">ë²„ê·¸ë¥¼ ì˜ˆì‹œí•˜ê±°ë‚˜</a> <a href="#roman.change" title="15.2.&nbsp;Handling changing requirements">ìƒˆë¡œìš´ ìš”êµ¬ì¡°ê±´ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œ</a> í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ì‘ì„±í•˜ê³  ê°±ì‹ í•˜ê¸°</li>
                        <li><a href="#roman.refactoring" title="15.3.&nbsp;Refactoring">ë¦¬íŒ©í† ë§</a>ì€ ì² ì €í•˜ê²Œ ìˆ˜í–‰ì„±ëŠ¥ê³¼ ì‹ ì¶•ì„± ê·¸ë¦¬ê³  ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± ë˜ëŠ” ëª¨ìë¼ëŠ” ê¸°íƒ€ ëª¨ë“  ê°€ëŠ¥ì„±ì„ ê°œì„ ì‹œì¼œ ì¤€ë‹¤.
                        </li>
                     </ul>
                  </div>
               </div>
               <p>ë˜í•œ, ë‹¤ìŒê³¼ ê°™ì´ <span class="application">íŒŒì´ì¬</span>-ì¢…ì†ì ì¸ ì¼ë“¤ì„ í¸ì•ˆí•˜ê²Œ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:
               </p>
               <div class="highlights">
                  <div class="itemizedlist">
                     <ul>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.testtoromanknownvalues.example" title="Example&nbsp;13.2.&nbsp;testToRomanKnownValues"><tt class="literal">unittest.TestCase</tt></a>ë¥¼ ìƒì†ë°›ì•„ ê°œë³„ì ì¸ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ìœ„í•œ ë©”ì˜ë“œë¥¼ ì‘ì„±í•˜ê¸°
                        </li>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.testtoromanknownvalues.example" title="Example&nbsp;13.2.&nbsp;testToRomanKnownValues"><tt class="function">assertEqual</tt></a>ì„ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ê°€ ì•Œë ¤ì§„ ê°’ì„ ëŒë ¤ì£¼ëŠ”ì§€ ì ê²€í•˜ê¸°
                        </li>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.tobadinput.example" title="Example&nbsp;13.3.&nbsp;Testing bad input to toRoman"><tt class="function">assertRaises</tt></a>ë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ê°€ ì•Œë ¤ì§„ ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ëŠ”ì§€ ì ê²€í•˜ê¸°
                        </li>
                        <li><a href="http://coreapython.hosting.paran.com/dive/chap14.html#roman.stage1.output" title="Example&nbsp;14.2.&nbsp;Output of romantest1.py against roman1.py"><tt class="literal">unittest.main()</tt></a>ì„ <tt class="literal">if __name__</tt> ì ˆ ì•ˆì—ì„œ í˜¸ì¶œí•˜ì—¬ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ í•œêº¼ë²ˆì— ì‹¤í–‰í•˜ê¸°
                        </li>
                        <li>ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ <a href="http://coreapython.hosting.paran.com/dive/chap14.html#roman.stage1.output" title="Example&nbsp;14.2.&nbsp;Output of romantest1.py against roman1.py">ìƒì„¸ ëª¨ë“œ</a>ë‚˜ <a href="#roman.stage8.1.output" title="Example&nbsp;15.12.&nbsp;Output of romantest81.py against roman81.py">ì¼ë°˜</a> ëª¨ë“œì—ì„œ ì‹¤í–‰í•˜ê¸°
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="itemizedlist">
                  <h3 class="title">ë” ì½ì–´ì•¼ í•  ê²ƒ</h3>
                  <ul>
                     <li><a href="http://www.xprogramming.com/">XProgramming.com</a>ì— ë‹¤ì–‘ì•ˆ ì–¸ì–´ì— ëŒ€í•œ <a href="http://www.xprogramming.com/software.htm">ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì—…í‹€</a>ì„ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆëŠ” ë§í¬ê°€ ë§ë‹¤.
                     </li>
                  </ul>
               </div>
            </div>
         </div>
<TABLE class='headerOFcontent'>
<TR>
    <TD align="left"><A HREF="chap14.html">â˜œ ì œ 14 ì¥ í…ŒìŠ¤íŠ¸-ë¨¼ì € í”„ë¡œê·¸ë˜ë°</A></TD>
    <TD align="center"><A HREF="chap00.html" title="ëª©ì°¨ë¡œ">"""  Dive Into Python  """<BR>ë‹¤ì´ë¹™ íŒŒì´ì¬</A></TD>
    <TD align="right"><A HREF="chap16.html">ì œ 16 ì¥ ê¸°ëŠ¥ì  í”„ë¡œê·¸ë˜ë° â˜</A></TD>
</TR>
</TABLE>
     </body>
</html>
