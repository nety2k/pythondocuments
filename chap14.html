        <!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	  <link rel="stylesheet" href="diveintopython.css" type="text/css">
      <link rev="made" href="mailto:johnsonj@dreamwiz.com">
      <meta name="generator" content="johnsonj">
      <meta name="description" content="ë‹¤ì´ë¹™ íŒŒì´ì¬ ë²ˆì—­.">
      <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free">
      <meta name="description" content="í•œê¸€íŒ">
   </head>
   <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.2.1028</b></a>  on  06/14/12 ¿ÀÈÄ 11:14:50.<br>
<b>Address:</b> <a class="info" href="http://coreapython.hosting.paran.com/dive/chap14.html">http://coreapython.hosting.paran.com/dive/chap14.html</a><br>
<b>Title:</b> 14. í…ŒìŠ¤íŠ¸-ë¨¼ì € í”„ë¡œê·¸ë˜ë° &nbsp;&bull;&nbsp; <b>Size:</b> 78788<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


<TABLE class='headerOFcontent'>
<TR>
    <TD align="left"><A HREF="chap13.html">â˜œ ì œ 13 ì¥ ìœ ë‹›í…ŒìŠ¤íŠ¸</A></TD>
    <TD align="center"><A HREF="chap00.html" title="ëª©ì°¨ë¡œ">"""  Dive Into Python  """<BR>ë‹¤ì´ë¹™ íŒŒì´ì¬</A></TD>
    <TD align="right"><A HREF="chap15.html">ì œ 15 ì¥ ë¦¬íŒ©í† ë§ â˜</A></TD>
</TR>
</TABLE>
		 <div name="14ì¥" class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="roman1.5"></a>ì œ&nbsp;14 ì¥&nbsp;í…ŒìŠ¤íŠ¸-ë¨¼ì € í”„ë¡œê·¸ë˜ë°</h1>
                  </div>
               </div>
               <div></div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.stage1"></a>14.1.&nbsp;<tt class="filename">roman.py</tt>, 1 ë‹¨ê³„
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ì™„ì„±ë˜ì—ˆìœ¼ë¯€ë¡œ, ì´ì œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¡œ í…ŒìŠ¤íŠ¸í•  ì½”ë“œë¥¼ ì‘ì„±í•  ì‹œê°„ì…ë‹ˆë‹¤. ë‹¨ê³„ë³„ë¡œ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ëª¨ë“  ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ê³ , ê·¸ ë‹¤ìŒì—  í•˜ë‚˜í•˜ë‚˜ <tt class="filename">roman.py</tt>ì— ë²Œì–´ì§„ í‹ˆìƒˆë¥¼ ì±„ì›Œ ë„£ì–´ ë³´ê² ìŠµë‹ˆë‹¤.
                  </p>
               </div>
               <div class="example"><a name="d0e32864"></a><h3 class="title">ì˜ˆì œ&nbsp;14.1.&nbsp;<tt class="filename">roman1.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage1/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ë‹¤ìŒ ì˜ˆì œì™€ ê¸°íƒ€ ì˜ˆì œë“¤</a>ì„ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""ë¡œë§ˆ ìˆ«ìë¥¼ ë³€í™˜í•œë‹¤"""

# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.
class RomanError(Exception): pass                <a name="roman.stage1.1.1"></a><span class="round">â‘ </span>
class OutOfRangeError(RomanError): pass          <a name="roman.stage1.1.2"></a><span class="round">â‘¡</span>
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass <a name="roman.stage1.1.3"></a><span class="round">â‘¢</span>

def toRoman(n):
    """ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    pass                                         <a name="roman.stage1.1.4"></a><span class="round">â‘£</span>

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    pass
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì´ëŠ” <span class="application">íŒŒì´ì¬</span>ì—ì„œ ë§ì¶¤ ì˜ˆì™¸ë¥¼ ì •ì˜í•˜ëŠ” ë²•ì…ë‹ˆë‹¤. ì˜ˆì™¸ëŠ” í´ë˜ìŠ¤ì´ë©°, ê¸°ì¡´ì˜ ì˜ˆì™¸ë¥¼ ìƒì†ë°›ìœ¼ë©´ ìì‹ ë§Œì˜ ì˜ˆì™¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ (í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ) <tt class="errorcode">Exception</tt> í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ ì˜ˆì™¸ í´ë˜ìŠ¤ëŠ” ëª¨ë“  ë‚´ì¥ ì˜ˆì™¸ì˜ ë°”íƒ• í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ <tt class="errorcode">RomanError</tt>ê°€ (<tt class="errorcode">Exception</tt>ë¥¼ ìƒì†ë°›ì•„) ë‹¤ë¥¸ ëª¨ë“  ì˜ˆì™¸ê°€ ë”°ë¥¼ ë°”íƒ• í´ë˜ìŠ¤ë¡œ í–‰ìœ„í•˜ë„ë¡ ì •ì˜í•©ë‹ˆë‹¤. ì´ëŠ” ìŠ¤íƒ€ì¼ì˜ ë¬¸ì œì…ë‹ˆë‹¤; ì˜ˆì™¸ë§ˆë‹¤ ì§ì ‘ <tt class="errorcode">Exception</tt> í´ë˜ìŠ¤ë¡œë¶€í„° ì•„ì£¼ ì‰½ê²Œ ìƒì†ë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. 
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.1.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="errorcode">OutOfRangeError</tt> ì˜ˆì™¸ì™€ <tt class="errorcode">NotIntegerError</tt> ì˜ˆì™¸ëŠ” ê²°êµ­ <tt class="function">toRoman</tt>ì´ ì‚¬ìš©í•´ì„œ <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.tobadinput.example" title="Example&nbsp;13.3.&nbsp;Testing bad input to toRoman"><tt class="classname">ToRomanBadInput</tt></a>ì— ì§€ì •ëœëŒ€ë¡œ, ë‹¤ì–‘í•œ í˜•íƒœì˜ ë¬´íš¨í•œ ì…ë ¥ì„ íŒë³„í•©ë‹ˆë‹¤.                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.1.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="errorcode">InvalidRomanNumeralError</tt> ì˜ˆì™¸ëŠ” ê²°êµ­ <tt class="function">fromRoman</tt>ì´ ì‚¬ìš©í•˜ì—¬  <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.frombadinput.example" title="Example&nbsp;13.4.&nbsp;Testing bad input to fromRoman"><tt class="classname">FromRomanBadInput</tt></a>ì˜ˆ ì§€ì •ëœëŒ€ë¡œ, ë¬´íš¨í•œ ì…ë ¥ì„ íŒë³„í•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.1.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ì´ ë‹¨ê³„ì—ì„œëŠ” í•¨ìˆ˜ì˜ <span class="acronym">API</span>ëŠ” ì§€ì •í•˜ê³ , ê·¸ëŸ¬ë‚˜ ì•„ì§ ì½”ë“œí•˜ê³  ì‹¶ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ íŒŒì´ì¬ì˜ <span class="application">íŒŒì´ì¬</span> ì˜ˆì•½ì–´ <a href="http://coreapython.hosting.paran.com/dive/chap05.html#fileinfo.class.simplest" title="Example&nbsp;5.3.&nbsp;The Simplest Python Class"><tt class="literal">pass</tt></a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ì‹œë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ê°€ìŠ´ ë›°ëŠ” ìˆœê°„ì…ë‹ˆë‹¤ (ë“œëŸ¼ ì†Œë¦¬ ë‘ë‘ë‘): ë§ˆì¹¨ë‚´ ì´ ì„ì‹œì˜ ì‘ì€ ëª¨ë“ˆì— ëŒ€í•´ì„œ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” ì‹¤íŒ¨í•´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ì‹¤, 1 ë‹¨ê³„ì—ì„œ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ë©´ ë‹¤ì‹œ <tt class="filename">romantest.py</tt>ë¡œ ëŒì•„ê°€ì„œ ì™œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¡œ í†µê³¼í•˜ë„ë¡ í…ŒìŠ¤íŠ¸ë¥¼ ì“¸ëª¨ì—†ì´ ì½”ë”©í–ˆëŠ”ì§€ ì¬í‰ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
               </p>
               <p>ëª…ë ¹ì–´ ì¤„ì—ì„œ <tt class="option">-v</tt> ì˜µì…˜ì„ ê°€ì§€ê³  <tt class="filename">romantest1.py</tt>ë¥¼ ì‹¤í–‰í•´ ë³´ì„¸ìš”. ê·¸ëŸ¬ë©´ ì¶œë ¥ì´ ë” ìƒì„¸í•´ì„œ, í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì •í™•í•˜ê²Œ ë¬´ìŠ¨ ì¼ì´ ì§„í–‰ë˜ê³  ìˆëŠ”ì§€ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš´ì´ ì¢‹ìœ¼ë©´ ì¶œë ¥ì€ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ê²ƒì…ë‹ˆë‹¤:
               </p>
               <div class="example"><a name="roman.stage1.output"></a><h3 class="title">ì˜ˆì œ&nbsp;14.2.&nbsp; <tt class="filename">roman1.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest1.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... ERROR
toRoman should always return uppercase ... ERROR
fromRoman should fail with malformed antecedents ... FAIL
fromRoman should fail with repeated pairs of numerals ... FAIL
fromRoman should fail with too many repeated numerals ... FAIL
fromRoman should give known result with known input ... FAIL
toRoman should give known result with known input ... FAIL
fromRoman(toRoman(n))==n for all n ... FAIL
toRoman should fail with non-integer input ... FAIL
toRoman should fail with negative input ... FAIL
toRoman should fail with large input ... FAIL
toRoman should fail with 0 input ... FAIL

======================================================================
ERROR: fromRoman should only accept uppercase input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 154, in testFromRomanCase
    roman1.fromRoman(numeral.upper())
AttributeError: 'None' object has no attribute 'upper'</span><span class="computeroutput">
======================================================================
ERROR: toRoman should always return uppercase
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 148, in testToRomanCase
    self.assertEqual(numeral, numeral.upper())
AttributeError: 'None' object has no attribute 'upper'</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with malformed antecedents
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 133, in testMalformedAntecedent
    self.assertRaises(roman1.InvalidRomanNumeralError, roman1.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with repeated pairs of numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 127, in testRepeatedPairs
    self.assertRaises(roman1.InvalidRomanNumeralError, roman1.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with too many repeated numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 122, in testTooManyRepeatedNumerals
    self.assertRaises(roman1.InvalidRomanNumeralError, roman1.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 99, in testFromRomanKnownValues
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
======================================================================
FAIL: toRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 93, in testToRomanKnownValues
    self.assertEqual(numeral, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: I != None</span><span class="computeroutput">
======================================================================
FAIL: fromRoman(toRoman(n))==n for all n
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 141, in testSanity
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with non-integer input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 116, in testNonInteger
    self.assertRaises(roman1.NotIntegerError, roman1.toRoman, 0.5)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: NotIntegerError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with negative input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 112, in testNegative
    self.assertRaises(roman1.OutOfRangeError, roman1.toRoman, -1)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with large input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 104, in testTooLarge
    self.assertRaises(roman1.OutOfRangeError, roman1.toRoman, 4000)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with 0 input                                 </span><a name="roman.stage1.2.1"></a><span class="round">â‘ </span><span class="computeroutput">
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage1\romantest1.py", line 108, in testZero
    self.assertRaises(roman1.OutOfRangeError, roman1.toRoman, 0)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError                                        </span><a name="roman.stage1.2.2"></a><span class="round">â‘¡</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 12 tests in 0.040s                                                 </span><a name="roman.stage1.2.3"></a><span class="round">â‘¢</span><span class="computeroutput">

FAILED (failures=10, errors=2)                                         </span><a name="roman.stage1.2.4"></a><span class="round">â‘£</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ <tt class="function">unittest.main()</tt>ì´ ì‹¤í–‰ë˜ëŠ”ë°, ì—¬ê¸°ì—ì„œ ê° í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ì‹¤í–‰ë˜ë©°, <tt class="filename">romantest.py</tt>ì˜ ê° í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ ë©”ì˜ë“œë¥¼ í•˜ë‚˜í•˜ë‚˜ ë³´ê³ í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë§ˆë‹¤, ê·¸ ë©”ì˜ë“œì˜ ë¬¸ì„œí™” ë¬¸ìì—´(<tt class="literal">Doc string</tt>)ì´ ì¸ì‡„ë˜ê³  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í–ˆëŠ”ì§€ ì‹¤íŒ¨í–ˆëŠ”ì§€ ì¸ì‡„ë©ë‹ˆë‹¤. ì˜ˆìƒëŒ€ë¡œ, ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ì‹¤íŒ¨í•  ë•Œë§ˆë‹¤, <tt class="filename">unittest</tt>ëŠ” ì •í™•í•˜ê²Œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì¶”ì  ì •ë³´ë¥¼ í™”ë©´ì— ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ê²½ìš°, <tt class="function">assertRaises</tt>ë¥¼ í˜¸ì¶œí–ˆë”ë‹ˆ (<tt class="function">failUnlessRaises</tt>ë¼ê³ ë„ ë¶ˆë¦¬ìš°ëŠ”) <tt class="errorcode">AssertionError</tt>ê°€ ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">toRoman</tt>ì´ <tt class="errorcode">OutOfRangeError</tt>ë¥¼ ì¼ìœ¼í‚¬ ê±°ë¼ê³  ì˜ˆìƒí–ˆëŠ”ë° ê·¸ë ‡ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.2.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">ìƒì„¸ ì •ë³´ê°€ ì¶œë ¥ëœ í›„, <tt class="filename">unittest</tt>ëŠ” ì–¼ë§ˆë‚˜ ë§ì€ í…ŒìŠ¤íŠ¸ê°€ ìˆ˜í–‰ë˜ì—ˆëŠ”ì§€ ê·¸ë¦¬ê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ ê±¸ë ¸ëŠ”ì§€ ìš”ì•½í•˜ì—¬ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage1.2.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ì „ë°˜ì ìœ¼ë¡œ, ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ì ì–´ë„ í•˜ë‚˜ì˜ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” í†µê³¼í•˜ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ <tt class="filename">unittest</tt>ëŠ” ì‹¤íŒ¨ì™€ ì—ëŸ¬ë¥¼ êµ¬ë³„í•©ë‹ˆë‹¤. ì‹¤íŒ¨ëŠ” ì˜ˆë¥¼ ë“¤ì–´ <tt class="function">assertEqual</tt>ë‚˜ <tt class="function">assertRaises</tt> ê°™ì€ <tt class="function">assertXYZ</tt> ë©”ì˜ë“œë¥¼ í˜¸ì¶œí•  ë•Œ, í‘œëª…ëœ ì¡°ê±´ì´ ì°¸ì´ ì•„ë‹ˆê±°ë‚˜ ì˜ˆìƒí•œ ì˜ˆì™¸ê°€ ì¼ì–´ë‚˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì¼ì–´ë‚©ë‹ˆë‹¤. ì—ëŸ¬ëŠ” í…ŒìŠ¤íŠ¸ì¤‘ì¸ ì½”ë“œì—ì„œ ë˜ëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ ìì²´ì—ì„œ ì¼ì–´ë‚œ ë‚˜ë¨¸ì§€ ëª¨ë“  ì˜ˆì™¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ (&#8220;<span class="quote"><tt class="function">fromRoman</tt>ì€ ì˜¤ì§ ëŒ€ë¬¸ìë§Œ ì…ë ¥ë°›ê¸° ë•Œë¬¸ì—</span>&#8221;) <tt class="function">testFromRomanCase</tt> ë©”ì˜ë“œëŠ” ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">numeral.upper()</tt>ë¥¼ í˜¸ì¶œí•˜ë©´ <tt class="errorcode">AttributeError</tt> ì˜ˆì™¸ê°€ ì¼ì–´ë‚¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. <tt class="function">toRoman</tt>ì€ ë¬¸ìì—´ì„ ëŒë ¤ì£¼ë„ë¡ ë˜ì–´ìˆì§€ë§Œ ê·¸ë ‡ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ <tt class="function">testZero</tt>ëŠ” (&#8220;<span class="quote"><tt class="function">toRoman</tt>ì€ 0ì´ ì…ë ¥ë˜ë©´ ì‹¤íŒ¨í•´ì•¼ í•˜ë¯€ë¡œ</span>&#8221;) ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="function">fromRoman</tt>ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ <tt class="function">assertRaises</tt>ê°€ ì°¾ê³  ìˆëŠ” <tt class="errorcode">InvalidRomanNumeral</tt> ì˜ˆì™¸ê°€ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.stage2"></a>14.2.&nbsp;<tt class="filename">roman.py</tt>, 2 ë‹¨ê³„
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ì´ì œ <tt class="filename">roman</tt> ëª¨ë“ˆ ì‘ì—…í‹€ì˜ ê¸°ë³¸ ê·¸ë¦¼ì„ ê·¸ë ¸ìœ¼ë¯€ë¡œ, ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ í†µê³¼ì‹œì¼œ ë³¼ ì‹œê°„ì…ë‹ˆë‹¤.
                  </p>
               </div>
               <div class="example"><a name="roman.stage2.example"></a><h3 class="title">ì˜ˆì œ&nbsp;14.3.&nbsp;<tt class="filename">roman2.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage2/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ë‹¤ìŒ ì˜ˆì œì™€ ë‹¤ë¥¸ ì˜ˆì œ</a>ë¥¼ ë‚´ë ¤ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""ë¡œë§ˆ ìˆ«ìë¥¼ ë³€í™˜í•œë‹¤"""

# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

# ìë¦¬ ì§ì§“ê¸°ë¥¼ ì •ì˜í•œë‹¤.
romanNumeralMap = (('M',  1000), <a name="roman.stage2.1.1"></a><span class="round">â‘ </span>
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

def toRoman(n):
    """ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    result = ""
    for numeral, integer in romanNumeralMap:
        while n &gt;= integer:      <a name="roman.stage2.1.2"></a><span class="round">â‘¡</span>
            result += numeral
            n -= integer
    return result

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    pass
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage2.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="varname">romanNumeralMap</tt>ì€ í„°í”Œë¡œ êµ¬ì„±ëœ í„°í”Œë¡œì„œ ì„¸ ê°€ì§€ê°€ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
                              <div class="orderedlist">
                                 <ol type="1">
                                    <li>ê°€ì¥ ê¸°ë³¸ì ì¸ ë¡œë§ˆ ìˆ«ìì˜ ë¬¸ì í‘œí˜„ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœíˆ í•œê°œì§œë¦¬ ë¡œë§ˆ ìˆ«ìë§Œì´ ì•„ë‹˜ì— ì£¼ëª©í•˜ì„¸ìš”;  <tt class="literal">CM</tt>ì™€ ê°™ì€ ë¬¸ì-ë‘ê°œì§œë¦¬ ìŒë„ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤ (&#8220;<span class="quote">ì²œë³´ë‹¤ ë°±ì´ ì‘ì€ ìˆ˜</span>&#8221;); ì´ë ‡ê²Œ í•˜ë©´ ë‚˜ì¤‘ì— <tt class="function">toRoman</tt> ì½”ë“œê°€ ë” ë‹¨ìˆœí•´ ì§‘ë‹ˆë‹¤.
                                    </li>
                                    <li>ë¡œë§ˆ ìˆ«ìì˜ ìˆœì„œê°€ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. <tt class="literal">M</tt>ì—ì„œë¶€í„° <tt class="literal">I</tt>ê¹Œì§€ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ë‚˜ì—´ë©ë‹ˆë‹¤.
                                    </li>
                                    <li>ë¡œë§ˆ ìˆ«ìì˜ ê°’ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì•ˆìª½ í„°í”Œì€ í•˜ë‚˜í•˜ë‚˜ê°€ í•œ ìŒì˜ <tt class="literal">(<i class="replaceable">numeral</i>, <i class="replaceable">value</i>)</tt>ì…ë‹ˆë‹¤.
                                    </li>
                                 </ol>
                              </div>
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage2.1.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ì—¬ê¸°ì—ì„œ í’ë¶€í•œ ë°ì´í„° êµ¬ì¡°ê°€ íš¨ê³¼ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ë¹¼ê¸° ê·œì¹™ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•˜ì—¬ íŠ¹ë³„í•œ ë¡œì§ì´ í•„ìš”ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•˜ê¸° ìœ„í•˜ì—¬, ê·¸ëƒ¥ ë‹¨ìˆœíˆ <tt class="varname">romanNumeralMap</tt>ì„ íšŒëŒì´í•˜ë©´ì„œ ì…ë ¥ ì´í•˜ì˜ ê°€ì¥ í° ì •ìˆ˜ ê°’ì„ ì°¾ìŠµë‹ˆë‹¤. ë°œê²¬ë˜ë©´ ë¡œë§ˆ ìˆ«ì í‘œí˜„ì„ ì¶œë ¥ì˜ ëì— ë”í•˜ê³ , ìƒì‘í•˜ëŠ” ì •ìˆ˜ ê°’ì„ ì…ë ¥ì—ì„œ ë¹¼ëŠ” ì¼ì„ ê³„ì† ë°˜ë³µí•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <div class="example"><a name="d0e33197"></a><h3 class="title">ì˜ˆì œ&nbsp;14.4.&nbsp;ì–´ë–»ê²Œ <tt class="function">toRoman</tt>ëŠ” ì‘ë™í•˜ëŠ”ê°€
                  </h3>
                  <p><tt class="function">toRoman</tt>ì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤ë©´ <tt class="function">print</tt> ì„œìˆ ë¬¸ì„ <tt class="literal">while</tt> íšŒëŒì´ì˜ ëì— ì¶”ê°€í•˜ì„¸ìš”:
                  </p><pre class="programlisting">
        while n &gt;= integer:
            result += numeral
            n -= integer
            print 'subtracting', integer, 'from input, adding', numeral, 'to output'</pre><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">import roman2</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">roman2.toRoman(1424)</span>
<span class="computeroutput">subtracting 1000 from input, adding M to output
subtracting 400 from input, adding CD to output
subtracting 10 from input, adding X to output
subtracting 10 from input, adding X to output
subtracting 4 from input, adding IV to output
'MCDXXIV'</span>
</pre></div>
               <p>ê·¸ë˜ì„œ <tt class="function">toRoman</tt>ì€ ì‘ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. ì ì–´ë„ ì´ë ‡ê²Œ ìˆ˜ì‘ì—…ìœ¼ë¡œ ìœ„ì¹˜ë¥¼ ì ê²€í•˜ë©´ ë§ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í• ê¹Œìš”? ì•„ë‹™ë‹ˆë‹¤. ì™„ì „íˆëŠ” ì•„ë‹™ë‹ˆë‹¤.
               </p>
               <div class="example"><a name="d0e33236"></a><h3 class="title">ì˜ˆì œ&nbsp;14.5.&nbsp; <tt class="filename">roman2.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest2.py</tt>ì˜ ì¶œë ¥</h3>
                  <p>ìŠì§€ë§ê³  <tt class="literal">-v</tt> ëª…ë ¹ì–´-ì¤„ í”Œë˜ê·¸ë¥¼ ê°€ì§€ê³  <tt class="filename">romantest2.py</tt>ë¥¼ ì‹¤í–‰ì‹œì¼œì„œ ìƒì„¸ ëª¨ë“œë¥¼ í™œì„±í™” ì‹œí‚¤ì„¸ìš”.
                  </p><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... FAIL
toRoman should always return uppercase ... ok                  </span><a name="roman.stage2.2.1"></a><span class="round">â‘ </span><span class="computeroutput">
fromRoman should fail with malformed antecedents ... FAIL
fromRoman should fail with repeated pairs of numerals ... FAIL
fromRoman should fail with too many repeated numerals ... FAIL
fromRoman should give known result with known input ... FAIL
toRoman should give known result with known input ... ok       </span><a name="roman.stage2.2.2"></a><span class="round">â‘¡</span><span class="computeroutput">
fromRoman(toRoman(n))==n for all n ... FAIL
toRoman should fail with non-integer input ... FAIL            </span><a name="roman.stage2.2.3"></a><span class="round">â‘¢</span><span class="computeroutput">
toRoman should fail with negative input ... FAIL
toRoman should fail with large input ... FAIL
toRoman should fail with 0 input ... FAIL</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage2.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì‚¬ì‹¤ <tt class="function">toRoman</tt>ì€ ì–¸ì œë‚˜ ëŒ€ë¬¸ìë¥¼ ëŒë ¤ì¤ë‹ˆë‹¤. ì™œëƒí•˜ë©´ <tt class="varname">romanNumeralMap</tt>ì— ë¡œë§ˆ ìˆ«ì í‘œí˜„ì´ ëŒ€ë¬¸ìë¡œ ì •ì˜ë˜ì–´ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ í…ŒìŠ¤íŠ¸ëŠ” ì´ë¯¸ í†µê³¼í–ˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage2.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ë‹¤ìŒì€ êµ‰ì¥í•œ ë‰´ìŠ¤ì…ë‹ˆë‹¤: ì´ ë²„ì „ì˜ <tt class="function">toRoman</tt> í•¨ìˆ˜ëŠ” <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.testtoromanknownvalues.example" title="Example&nbsp;13.2.&nbsp;testToRomanKnownValues">ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸</a>ë¥¼ í†µê³¼í•©ë‹ˆë‹¤.  ê¸°ì–µí•˜ì„¸ìš”. ì´ í…ŒìŠ¤íŠ¸ëŠ” ì¢…í•©ì ì´ì§€ëŠ” ì•Šì§€ë§Œ í•¨ìˆ˜ë¥¼ ë‹¤ì–‘í•œ ì¢‹ì€ ì…ë ¥ì— ë§ì¶”ì–´ ì‹œí–‰í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” ë¬¸ì-í•œê°œì§œë¦¬ ë¡œë§ˆ ìˆ«ì ì…ë ¥ê³¼ ê°€ì¥ í° ì…ë ¥(<tt class="literal">3999</tt>) ê·¸ë¦¬ê³  ê°€ì¥ ê¸´ ë¡œë§ˆìˆ«ì ì…ë ¥(<tt class="literal">3888</tt>)ì´ í¬í•¨ë©ë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ ì–´ë–¤ ê°’ì´ë“  ì¢‹ì€ ê°’ì„ ë˜ì ¸ ë„£ìœ¼ë©´ í•¨ìˆ˜ëŠ” ì œëŒ€ë¡œ ì‘ë™í•œë‹¤ê³  ì¶©ë¶„íˆ í™•ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage2.2.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">ê·¸ë ‡ì§€ë§Œ í•¨ìˆ˜ëŠ” ë‚˜ìœ ê°’ì— ëŒ€í•˜ì—¬ &#8220;<span class="quote">ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</span>&#8221;; í•œê°œì§œë¦¬ <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.tobadinput.example" title="Example&nbsp;13.3.&nbsp;Testing bad input to toRoman">ë‚˜ìœ ì…ë ¥ í…ŒìŠ¤íŠ¸ë§ˆë‹¤</a> ì‹¤íŒ¨í•©ë‹ˆë‹¤.  ë‚˜ìœ ì…ë ¥ì„ ì ê²€í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•©ë‹ˆë‹¤. ê·¸ëŸ° í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ëŠ” (<tt class="function">assertRaises</tt>ë¥¼ í†µí•˜ì—¬) íŠ¹ì •í•œ ì˜ˆì™¸ê°€ ì¼ì–´ë‚˜ê¸°ë¥¼ ê¸°ëŒ€í•˜ëŠ”ë°, ì „í˜€ ê·¸ëŸ° ì˜ˆì™¸ëŠ” ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ê·¸ë ‡ê²Œ í•´ ë³´ê² ìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
                  <p>ë‹¤ìŒì€ ìœ ë‹› í…ŒìŠ¤íŠ¸ì˜ ë‚˜ë¨¸ì§€ ì¶œë ¥ìœ¼ë¡œì„œ, ëª¨ë“  ì‹¤íŒ¨ë¥¼ ìì„¸í•˜ê²Œ ë‚˜ì—´í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤íŒ¨ëŠ” 10ê°œê¹Œì§€ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</p><pre class="screen"><span class="computeroutput">
======================================================================
FAIL: fromRoman should only accept uppercase input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 156, in testFromRomanCase
    roman2.fromRoman, numeral.lower())
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with malformed antecedents
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 133, in testMalformedAntecedent
    self.assertRaises(roman2.InvalidRomanNumeralError, roman2.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with repeated pairs of numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 127, in testRepeatedPairs
    self.assertRaises(roman2.InvalidRomanNumeralError, roman2.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with too many repeated numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 122, in testTooManyRepeatedNumerals
    self.assertRaises(roman2.InvalidRomanNumeralError, roman2.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 99, in testFromRomanKnownValues
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
======================================================================
FAIL: fromRoman(toRoman(n))==n for all n
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 141, in testSanity
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with non-integer input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 116, in testNonInteger
    self.assertRaises(roman2.NotIntegerError, roman2.toRoman, 0.5)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: NotIntegerError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with negative input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 112, in testNegative
    self.assertRaises(roman2.OutOfRangeError, roman2.toRoman, -1)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with large input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 104, in testTooLarge
    self.assertRaises(roman2.OutOfRangeError, roman2.toRoman, 4000)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError</span><span class="computeroutput">
======================================================================
FAIL: toRoman should fail with 0 input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage2\romantest2.py", line 108, in testZero
    self.assertRaises(roman2.OutOfRangeError, roman2.toRoman, 0)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: OutOfRangeError</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 12 tests in 0.320s

FAILED (failures=10)</span></pre></div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.stage3"></a>14.3.&nbsp;<tt class="filename">roman.py</tt>, 3 ë‹¨ê³„
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ì´ì œ <tt class="function">toRoman</tt>ì€ ì¢‹ì€ ì…ë ¥ (<tt class="literal">1</tt>ì—ì„œ <tt class="literal">3999</tt> ê¹Œì§€ì˜ ì •ìˆ˜)ì— ëŒ€í•˜ì—¬ ì˜¬ë°”ë¥´ê²Œ í–‰ìœ„í•˜ë¯€ë¡œ, (ë‹¤ë¥¸ ë¬´ì—‡ì´ë“ ) ë‚˜ìœ ì…ë ¥ì— ëŒ€í•´ì„œ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ë„ë¡ ë§Œë“¤ ì‹œê°„ì…ë‹ˆë‹¤.
                  </p>
               </div>
               <div class="example"><a name="d0e33364"></a><h3 class="title">ì˜ˆì œ&nbsp;14.6.&nbsp;<tt class="filename">roman3.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage3/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ë‹¤ìŒ ì˜ˆì œì™€ ë‹¤ë¥¸ ì˜ˆì œë¥¼</a> ë‚´ë ¤ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""ë¡œë§ˆ ìˆ«ìë¥¼ ë³€í™˜í•œë‹¤"""

# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

# ìë¦¬ ì§ì§“ê¸°ë¥¼ ì •ì˜í•œë‹¤.
romanNumeralMap = (('M',  1000),
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

def toRoman(n):
    """ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    if not (0 &lt; n &lt; 4000):                                             <a name="roman.stage3.1.1"></a><span class="round">â‘ </span>
        raise OutOfRangeError, "number out of range (must be 1..3999)" <a name="roman.stage3.1.2"></a><span class="round">â‘¡</span>
    if int(n) &lt;&gt; n:                                                    <a name="roman.stage3.1.3"></a><span class="round">â‘¢</span>
        raise NotIntegerError, "non-integers can not be converted"

    result = ""                                                        <a name="roman.stage3.1.4"></a><span class="round">â‘£</span>
    for numeral, integer in romanNumeralMap:
        while n &gt;= integer:
            result += numeral
            n -= integer
    return result

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    pass
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì´ëŠ” <span class="application">íŒŒì´ì¬</span>ìŠ¤ëŸ¬ìš´ ë©‹ì§„ ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤: ì—¬ëŸ¬ ë¹„êµë¥¼ í•œ ë²ˆì— í–‰í•©ë‹ˆë‹¤.  ì´ëŠ” '<tt class="literal">if not ((0 &lt; n) and (n &lt; 4000))</tt>'ê³¼ ë™ë“±í•˜ì§€ë§Œ í›¨ì”¬ ë” ì½ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë²”ìœ„ ì ê²€ì´ê³ , ë„ˆë¬´ í¬ê±°ë‚˜ ìŒìˆ˜ ë˜ëŠ” 0ì¸ ì…ë ¥ì„ ì¡ì•„ì•¼ í•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.1.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="literal">raise</tt> ì„œìˆ ë¬¸ìœ¼ë¡œ ì§ì ‘ ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. ë‚´ì¥ ì˜ˆì™¸ë¥¼ ëª¨ë‘ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìœ¼ë©°, ì†ìˆ˜ ì •ì˜í•œ ë§ì¶¤ ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì¸ ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ì„ íƒì ì…ë‹ˆë‹¤; ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ê°€ ì£¼ì–´ì§€ë©´ ì˜ˆì™¸ê°€ ì²˜ë¦¬ë˜ì§€ ëª»í•  ê²½ìš° ì¸ì‡„ë˜ëŠ” ì—­ì¶”ì  ë©”ì‹œì§€ ì•ˆì— í‘œì‹œë©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.1.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">ì´ê²ƒì€ ë¹„-ì •ìˆ˜ ì ê²€ì…ë‹ˆë‹¤. ë¹„-ì •ìˆ˜ëŠ” ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.1.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ë‚˜ë¨¸ì§€ í•¨ìˆ˜ëŠ” ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤.</td>
                        </tr>
                     </table>
                  </div>
               </div>
               <div class="example"><a name="d0e33410"></a><h3 class="title">ì˜ˆì œ&nbsp;14.7.&nbsp; <tt class="function">toRoman</tt>ì´ ì–´ë–»ê²Œ ë‚˜ìœ ì…ë ¥ì„ ë‹¤ë£¨ëŠ”ì§€ ì‚´í´ë³´ê¸°
                  </h3><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">import roman3</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">roman3.toRoman(4000)</span>
<span class="traceback">Traceback (most recent call last):
  File "&lt;interactive input&gt;", line 1, in ?
  File "roman3.py", line 27, in toRoman
    raise OutOfRangeError, "number out of range (must be 1..3999)"
OutOfRangeError: number out of range (must be 1..3999)</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">roman3.toRoman(1.5)</span>
<span class="traceback">Traceback (most recent call last):
  File "&lt;interactive input&gt;", line 1, in ?
  File "roman3.py", line 29, in toRoman
    raise NotIntegerError, "non-integers can not be converted"
NotIntegerError: non-integers can not be converted</span>
</pre></div>
               <div class="example"><a name="d0e33439"></a><h3 class="title">ì˜ˆì œ&nbsp;14.8.&nbsp;<tt class="filename">roman3.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest3.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... FAIL
toRoman should always return uppercase ... ok
fromRoman should fail with malformed antecedents ... FAIL
fromRoman should fail with repeated pairs of numerals ... FAIL
fromRoman should fail with too many repeated numerals ... FAIL
fromRoman should give known result with known input ... FAIL
toRoman should give known result with known input ... ok </span><a name="roman.stage3.2.1"></a><span class="round">â‘ </span><span class="computeroutput">
fromRoman(toRoman(n))==n for all n ... FAIL
toRoman should fail with non-integer input ... ok        </span><a name="roman.stage3.2.2"></a><span class="round">â‘¡</span><span class="computeroutput">
toRoman should fail with negative input ... ok           </span><a name="roman.stage3.2.3"></a><span class="round">â‘¢</span><span class="computeroutput">
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left"><tt class="function">toRoman</tt> í•¨ìˆ˜ë„ <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.testtoromanknownvalues.example" title="Example&nbsp;13.2.&nbsp;testToRomanKnownValues">ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸</a>ë¥¼ í†µê³¼í•©ë‹ˆë‹¤. ê³ ë§™êµ°ìš”.  <a href="#roman.stage2" title="14.2.&nbsp;roman.py, stage 2">2 ë‹¨ê³„</a>ë¥¼ í†µê³¼í•œ í…ŒìŠ¤íŠ¸ë„ ëª¨ë‘ í†µê³¼í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìµœì‹  ì½”ë“œëŠ” ì•„ë¬´ê²ƒë„ ë§ê°€íŠ¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ë” ì‹ ë‚˜ëŠ” ê²ƒì€ ì´ì œ <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.tobadinput.example" title="Example&nbsp;13.3.&nbsp;Testing bad input to toRoman">ë‚˜ìœ ì…ë ¥ í…ŒìŠ¤íŠ¸</a>ê°€ ëª¨ë‘ í†µê³¼í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ <tt class="function">testNonInteger</tt> í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">int(n) &lt;&gt; n</tt> ì ê²€ ë•Œë¬¸ì— í†µê³¼í•©ë‹ˆë‹¤. ë¹„-ì •ìˆ˜ê°€ <tt class="function">toRoman</tt>ì— ê±´ë„¤ì§€ë©´ <tt class="literal">int(n) &lt;&gt; n</tt> ì ê²€ì€ ê·¸ê²ƒì„ ì•Œì•„ì±„ê³  <tt class="errorcode">NotIntegerError</tt> ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ëŠ”ë°, ì´ ì˜ˆì™¸ëŠ”  <tt class="function">testNonInteger</tt>ê°€ ê¸°ëŒ€í•˜ê³  ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.2.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">ì´ <tt class="function">testNegative</tt> í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">not (0 &lt; n &lt; 4000)</tt> ì ê²€ ë•Œë¬¸ì— í†µê³¼í•˜ëŠ”ë°, ì´ëŠ” <tt class="errorcode">OutOfRangeError</tt> ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ê³ , ì´ ì˜ˆì™¸ëŠ” <tt class="function">testNegative</tt>ê°€ ê¸°ëŒ€í•˜ê³  ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div><pre class="screen"><span class="computeroutput">
======================================================================
FAIL: fromRoman should only accept uppercase input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 156, in testFromRomanCase
    roman3.fromRoman, numeral.lower())
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with malformed antecedents
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 133, in testMalformedAntecedent
    self.assertRaises(roman3.InvalidRomanNumeralError, roman3.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with repeated pairs of numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 127, in testRepeatedPairs
    self.assertRaises(roman3.InvalidRomanNumeralError, roman3.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with too many repeated numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 122, in testTooManyRepeatedNumerals
    self.assertRaises(roman3.InvalidRomanNumeralError, roman3.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should give known result with known input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 99, in testFromRomanKnownValues
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
======================================================================
FAIL: fromRoman(toRoman(n))==n for all n
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage3\romantest3.py", line 141, in testSanity
    self.assertEqual(integer, result)
  File "c:\python21\lib\unittest.py", line 273, in failUnlessEqual
    raise self.failureException, (msg or '%s != %s' % (first, second))
AssertionError: 1 != None</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 12 tests in 0.401s

FAILED (failures=6)</span> <a name="roman.stage3.3.1"></a><span class="round">â‘ </span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage3.3.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì‹¤íŒ¨ê°€ 6 ê°œê¹Œì§€ ë‚´ë ¤ì™”ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ëª¨ë‘ê°€ <tt class="function">fromRoman</tt>ì— ê´€ë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤: ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸, ì„¸ ê°œë¡œ ë‚˜ë‰œ ë‚˜ìœ ì…ë ¥ í…ŒìŠ¤íŠ¸, ëŒ€ì†Œë¬¸ì ì ê²€, ê·¸ë¦¬ê³  ìœ„ìƒ ì ê²€ì´ ê·¸ê²ƒì…ë‹ˆë‹¤. ê·¸ê²ƒì€ <tt class="function">toRoman</tt>ì´ ìŠ¤ìŠ¤ë¡œ í†µê³¼í•  ìˆ˜ ìˆëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. (ìœ„ìƒ ì ê²€ì— ê´€ë ¨ë˜ì–´ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ë˜í•œ ì•„ì§ ì‘ì„±ë˜ì§€ ì•Šì€ <tt class="function">fromRoman</tt>ì´ ì´ë¯¸ ì‘ì„±ë˜ì–´ ìˆê¸°ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.)  ì´ëŠ” ì´ì œ <tt class="function">toRoman</tt>ì˜ ì½”ë”©ì„ ë©ˆì¶”ì–´ì•¼ í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. &#8220;<span class="quote">ì‚¬ë¡€ë§ˆë‹¤ ë”± ë§ê²Œ</span>&#8221; ë” ì† ëŒˆ ê²ƒë„, ë” ì¡°ì‘í•  ê²ƒë„, ì¶”ê°€ë¡œ ë” ì ê²€í•  í•„ìš”ë„ ì—†ìŠµë‹ˆë‹¤. ì´ì œ ë©ˆì¶”ì„¸ìš”. í‚¤ë³´ë“œë¡œë¶€í„° ë©€ë¦¬ ë–¨ì–´ì ¸ ì•‰ìœ¼ì„¸ìš”.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div><a name="d0e33558"></a><table class="note" border="0" summary="">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="1%"><span class="roundNote">â˜</span></td>
                  </tr>
                  <tr>
                     <td colspan="2" align="left" valign="top" width="99%">ì¢…í•©ì ì¸ ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ì•Œë ¤ì£¼ì–´ì•¼ í•  ê°€ì¥ ì¤‘ìš”í•œ ì¼ì€ ì½”ë”©ì„ ë©ˆì¶”ì–´ì•¼ í•  ë•Œë¥¼ ì•Œë ¤ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤. í•œ í•¨ìˆ˜ì— ëŒ€í•˜ì—¬ ëª¨ë“  ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ ì½”ë”©ì„ ë©ˆì¶”ì„¸ìš”. ì „ì²´ ëª¨ë“ˆì— ëŒ€í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•˜ë©´ ë°”ë¡œ ì½”ë”©ì„ ë©ˆì¶”ì„¸ìš”.
                     </td>
                  </tr>
               </table>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.stage4"></a>14.4.&nbsp;<tt class="filename">roman.py</tt>, 4 ë‹¨ê³„
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ì´ì œ <tt class="function">toRoman</tt>ì´ ì™„ì„±ë˜ì—ˆìœ¼ë¯€ë¡œ, <tt class="function">fromRoman</tt>ì„ ì½”ë”©í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ ê°’ì„ ì§ì§€ì–´ ì£¼ëŠ” í’ë¶€í•œ ë°ì´í„° êµ¬ì¡° ë•ë¶„ì—, <tt class="function">toRoman</tt> í•¨ìˆ˜ë³´ë‹¤ ì–´ë µì§€ ì•Šê²Œ ì½”ë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p>
               </div>
               <div class="example"><a name="d0e33582"></a><h3 class="title">ì˜ˆì œ&nbsp;14.9.&nbsp;<tt class="filename">roman4.py</tt></h3>
                  <p>ë‹¤ìŒ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage4/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ë‹¤ìŒ ì˜ˆì œì™€ ê¸°íƒ€ ì˜ˆì œë¥¼</a> ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""ë¡œë§ˆ ìˆ«ìë¥¼ ë³€í™˜í•œë‹¤"""

# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

# ìë¦¬ ì§ì§“ê¸°ë¥¼ ì •ì˜í•œë‹¤
romanNumeralMap = (('M',  1000),
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

# ê¹¨ë—í•˜ê²Œ toRoman í•¨ìˆ˜ëŠ” ìƒëµë¨ (ë°”ë€Œì§€ ì•ŠìŒ)

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    result = 0
    index = 0
    for numeral, integer in romanNumeralMap:
        while s[index:index+len(numeral)] == numeral: <a name="roman.stage4.1.1"></a><span class="round">â‘ </span>
            result += integer
            index += len(numeral)
    return result
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage4.1.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì—¬ê¸°ì—ì„œ íŒ¨í„´ì€ <a href="#roman.stage2.example" title="Example&nbsp;14.3.&nbsp;roman2.py"><tt class="function">toRoman</tt></a>ì™€ ë˜‘ê°™ìŠµë‹ˆë‹¤. ë¡œë§ˆ ìˆ«ì ë°ì´í„° êµ¬ì¡°(í„°í”Œë¡œ êµ¬ì„±ëœ í„°í”Œ)ë¥¼ íšŒëŒì´í•˜ë©´ì„œ, ê·¸ë¦¬ê³  ê°€ëŠ¥í•˜ë©´ ê°€ì¥ í° ì •ìˆ˜ ê°’ì„ ì¼ì¹˜ì‹œí‚¤ëŠ” ëŒ€ì‹ ì—, ê°€ëŠ¥í•˜ë©´ &#8220;<span class="quote">ê°€ì¥ í°</span>&#8221; ë¡œë§ˆ ìˆ«ì ë¬¸ìì—´ì„ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <div class="example"><a name="d0e33611"></a><h3 class="title">ì˜ˆì œ&nbsp;14.10.&nbsp;ì–´ë–»ê²Œ <tt class="function">fromRoman</tt>ì€ ì‘ë™í•˜ëŠ”ê°€
                  </h3>
                  <p><tt class="function">fromRoman</tt>ì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì˜ ì´í•´ê°€ ì•ˆ ê°€ì‹ ë‹¤ë©´ <tt class="function">print</tt> ì„œìˆ ë¬¸ì„ <tt class="literal">while</tt> íšŒëŒì´ì˜ ëì— ì¶”ê°€í•˜ì„¸ìš”:
                  </p><pre class="programlisting">
        while s[index:index+len(numeral)] == numeral:
            result += integer
            index += len(numeral)
            print 'found', numeral, 'of length', len(numeral), ', adding', integer</pre><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">import roman4</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">roman4.fromRoman('MCMLXXII')</span>
<span class="computeroutput">found M , of length 1, adding 1000
found CM , of length 2, adding 900
found L , of length 1, adding 50
found X , of length 1, adding 10
found X , of length 1, adding 10
found I , of length 1, adding 1
found I , of length 1, adding 1
1972</span></pre></div>
               <div class="example"><a name="d0e33644"></a><h3 class="title">ì˜ˆì œ&nbsp;14.11.&nbsp;<tt class="filename">roman4.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest4.py</tt>ì˜ ì¶œë ¥</h3><pre class="screen"><span class="computeroutput">fromRoman should only accept uppercase input ... FAIL
toRoman should always return uppercase ... ok
fromRoman should fail with malformed antecedents ... FAIL
fromRoman should fail with repeated pairs of numerals ... FAIL
fromRoman should fail with too many repeated numerals ... FAIL
fromRoman should give known result with known input ... ok </span><a name="roman.stage4.2.1"></a><span class="round">â‘ </span><span class="computeroutput">
toRoman should give known result with known input ... ok
fromRoman(toRoman(n))==n for all n ... ok                  </span><a name="roman.stage4.2.2"></a><span class="round">â‘¡</span><span class="computeroutput">
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage4.2.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì—¬ê¸°ì—ì„œ ë‘ ê°€ì§€ ê¸°ìœ ì†Œì‹ì´ ìˆìŠµë‹ˆë‹¤. ì²« ì†Œì‹ì€ <tt class="function">fromRoman</tt>ì´ ì¢‹ì€ ì…ë ¥ì— ëŒ€í•˜ì—¬ ì‘ë™í•˜ë©°, ì ì–´ë„ í…ŒìŠ¤íŠ¸ëœ ëª¨ë“  <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.testtoromanknownvalues.example" title="Example&nbsp;13.2.&nbsp;testToRomanKnownValues">ì•Œë ¤ì§„ ê°’</a>ì— ëŒ€í•˜ì—¬ ì‘ë™í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage4.2.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ë‘ë²ˆì§¸ ì†Œì‹ì€ <a href="http://coreapython.hosting.paran.com/dive/chap13.html#roman.sanity.example" title="Example&nbsp;13.5.&nbsp;Testing toRoman against fromRoman">ìœ„ìƒ ì ê²€</a>ë„ í†µê³¼í–ˆë‹¤ëŠ” ì‚¬ì‹¤ì…ë‹ˆë‹¤. ì•Œë ¤ì§„ ê°’ í…ŒìŠ¤íŠ¸ì™€ ê²°í•©í•˜ë©´ <tt class="function">toRoman</tt>ê³¼ <tt class="function">fromRoman</tt>ê°€ ëª¨ë“  ê°€ëŠ¥í•œ ì¢‹ì€ ê°’ì— ëŒ€í•˜ì—¬ ì ì ˆí•˜ê²Œ ì‘ë™í•œë‹¤ê³  ì¶©ë¶„íˆ í™•ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  (ì´ëŠ” ë³´ì¦ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤; ì´ë¡ ì ìœ¼ë¡œ íŠ¹ì •í•œ ì…ë ¥ ì§‘í•©ì— ëŒ€í•˜ì—¬ ê·¸ë¦‡ëœ ë¡œë§ˆ ìˆ«ìë¥¼ ì‚°ì¶œí•˜ëŠ” ë²„ê·¸ê°€ <tt class="function">toRoman</tt>ì— ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. <span class="emphasis"><em>ê·¸ë¦¬ê³ </em></span> <tt class="function">toRoman</tt>ì´ ì—‰í„°ë¦¬ë¡œ ìƒì„±í•œ ë˜‘ ê°™ì€ ë¡œë§ˆ ìˆ«ì ì§‘í•©ì— ëŒ€í•˜ì—¬ ì„œë¡œ ê·¸ë¦‡ëœ ì •ìˆ˜ ê°’ì„ ì‚°ì¶œí•˜ëŠ” ë²„ê·¸ê°€ <tt class="function">fromRoman</tt>ì—ë„ ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìš”êµ¬ì¡°ê±´ì— ë”°ë¼, ì´ ê°€ëŠ¥ì„± ë•Œë¬¸ì— ê³¤ë€ì„ ê²ªì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤; ê·¸ë ‡ë‹¤ë©´ ê´´ë¡­íˆì§€ ì•Šì„ ë•Œê¹Œì§€ ë” ì¢…í•©ì ì¸ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ì‘ì„±í•˜ì„¸ìš”.)
                           </td>
                        </tr>
                     </table>
                  </div><pre class="screen"><span class="computeroutput">
======================================================================
FAIL: fromRoman should only accept uppercase input
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage4\romantest4.py", line 156, in testFromRomanCase
    roman4.fromRoman, numeral.lower())
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with malformed antecedents
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage4\romantest4.py", line 133, in testMalformedAntecedent
    self.assertRaises(roman4.InvalidRomanNumeralError, roman4.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with repeated pairs of numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage4\romantest4.py", line 127, in testRepeatedPairs
    self.assertRaises(roman4.InvalidRomanNumeralError, roman4.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
======================================================================
FAIL: fromRoman should fail with too many repeated numerals
----------------------------------------------------------------------
</span><span class="traceback">Traceback (most recent call last):
  File "C:\docbook\dip\py\roman\stage4\romantest4.py", line 122, in testTooManyRepeatedNumerals
    self.assertRaises(roman4.InvalidRomanNumeralError, roman4.fromRoman, s)
  File "c:\python21\lib\unittest.py", line 266, in failUnlessRaises
    raise self.failureException, excName
AssertionError: InvalidRomanNumeralError</span><span class="computeroutput">
----------------------------------------------------------------------
Ran 12 tests in 1.222s

FAILED (failures=4)</span></pre></div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="roman.stage5"></a>14.5.&nbsp;<tt class="filename">roman.py</tt>, 5 ë‹¨ê³„
                        </h2>
                     </div>
                  </div>
                  <div></div>
               </div>
               <div class="abstract">
                  <p>ì´ì œ <tt class="function">fromRoman</tt>ì€ ì¢‹ì€ ì…ë ¥ì— ëŒ€í•˜ì—¬ ì ì ˆí•˜ê²Œ ì‘ë™í•˜ë¯€ë¡œ, ë§ˆì§€ë§‰ í¼ì¦ ì¡°ê°ì„ ë§ì¶œ ì‹œê°„ì…ë‹ˆë‹¤: ë‚˜ìœ ì…ë ¥ì— ì‘ë™í•˜ë„ë¡ ë§Œë“¤ ì‹œê°„ì…ë‹ˆë‹¤. ì¦‰, ë¬¸ìì—´ì„ ë³´ê³  ìœ íš¨í•œ ë¡œë§ˆ ìˆ«ìì¸ì§€ ê²°ì •í•˜ëŠ” ë°©ë²•ì„ ì°¾ëŠ”ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì´ëŠ” ê·¼ë³¸ì ìœ¼ë¡œ <tt class="function">toRoman</tt>ì—ì„œ <a href="#roman.stage3" title="14.3.&nbsp;roman.py, stage 3">ìˆ«ì¹˜ ì…ë ¥ì„ í‰ê°€í•˜ëŠ” ê²ƒ</a>ë³´ë‹¤ ì–´ë µì§€ë§Œ ê°•ë ¥í•œ ë„êµ¬ê°€ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤: ì •ê·œ í‘œí˜„ì‹ì´ ë°”ë¡œ ê·¸ê²ƒì…ë‹ˆë‹¤.
                  </p>
               </div>
               <p>ì •ê·œ í‘œí˜„ì‹ì„ ì˜ ëª¨ë¥´ê³  <a href="http://coreapython.hosting.paran.com/dive/chap07.html#re" title="Chapter&nbsp;7.&nbsp;Regular Expressions">ì œ&nbsp;7 ì¥, <i>ì •ê·œ í‘œí˜„ì‹</i></a>ì„ ì½ì§€ ëª»í•˜ì…¨ë‹¤ë©´ ì§€ê¸ˆì´ ì¢‹ì€ ê¸°íšŒì…ë‹ˆë‹¤.
               </p>
               <p><a href="http://coreapython.hosting.paran.com/dive/chap07.html#re.roman" title="7.3.&nbsp;Case Study: Roman Numerals">ì„¹ì…˜&nbsp;7.3, &#8220;ì‚¬ë¡€ ì—°êµ¬: ë¡œë§ˆ ìˆ«ì&#8221;</a>ì—ì„œ ë³´ì…¨ë“¯ì´, ë¡œë§ˆ ìˆ«ìë¥¼ ë§Œë“œëŠ” ë°©ë²•ì—ëŠ” ê°„ë‹¨í•œ ê·œì¹™ì´ ì—¬ëŸ¿ ìˆìŠµë‹ˆë‹¤. <tt class="literal">M</tt>, <tt class="literal">D</tt>, <tt class="literal">C</tt>, <tt class="literal">L</tt>, <tt class="literal">X</tt>, <tt class="literal">V</tt>, ê·¸ë¦¬ê³  <tt class="literal">I</tt>ë¼ëŠ” ê¸°í˜¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  ê·œì¹™ì„ ë³µìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤:
               </p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>ë¬¸ìëŠ” ë¶€ê°€ì ì´ë‹¤.  <tt class="literal">I</tt>ëŠ” <tt class="constant">1</tt>ì´ë©°, <tt class="literal">II</tt>ëŠ” <tt class="literal">2</tt>ì´ê³ , <tt class="literal">III</tt>ëŠ” <tt class="literal">3</tt>ì´ë‹¤.  <tt class="literal">VI</tt>ëŠ” <tt class="literal">6</tt>ì´ê³  (ë¬¸ì ê·¸ëŒ€ë¡œ, &#8220;<span class="quote"><tt class="literal">5</tt>ì™€ <tt class="literal">1</tt></span>&#8221;ì„), <tt class="literal">VII</tt>ëŠ” <tt class="literal">7</tt>ì´ë©°, <tt class="literal">VIII</tt>ëŠ” <tt class="literal">8</tt>ì´ë‹¤.
                     </li>
                     <li>ì‹­ë‹¨ìœ„ ë¬¸ì(<tt class="literal">I</tt>, <tt class="literal">X</tt>, <tt class="literal">C</tt>, ê·¸ë¦¬ê³  <tt class="literal">M</tt>)ëŠ” ì„¸ ë²ˆê¹Œì§€ ë°˜ë³µë  ìˆ˜ ìˆë‹¤.  <tt class="literal">4</tt>ì— ì´ë¥´ë©´ ë‹¤ìŒ ë†’ì€ ì˜¤ ë‹¨ìœ„ ë¬¸ìì—ì„œ ëº„ í•„ìš”ê°€ ìˆë‹¤. <tt class="literal">4</tt>ë¥¼ <tt class="literal">IIII</tt>ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ì—†ë‹¤; ëŒ€ì‹ ì—, <tt class="literal">IV</tt>ë¡œ í‘œí˜„ëœë‹¤ (&#8220;<span class="quote"><tt class="literal">5</tt>ë³´ë‹¤ <tt class="literal">1</tt> ì‘ì€ ìˆ˜</span>&#8221;).  <tt class="literal">40</tt>ì€ <tt class="literal">XL</tt>ë¡œ í‘œê¸°ë˜ë©° (&#8220;<span class="quote"><tt class="literal">50</tt>ë³´ë‹¤ <tt class="literal">10</tt> ì‘ì€ ìˆ˜</span>&#8221;), <tt class="literal">41</tt>ì€ <tt class="literal">XLI</tt>ë¡œ, <tt class="literal">42</tt>ëŠ” <tt class="literal">XLII</tt>ë¡œ, <tt class="literal">43</tt>ì€ <tt class="literal">XLIII</tt>ë¡œ í‘œê¸°ë˜ê³ , ê·¸ë¦¬ê³  <tt class="literal">44</tt>ëŠ” <tt class="literal">XLIV</tt>ë¡œ í‘œê¸°ëœë‹¤ (&#8220;<span class="quote"><tt class="literal">50</tt>ë³´ë‹¤ <tt class="literal">10</tt> ì‘ê³ , <tt class="literal">5</tt>ë³´ë‹¤ <tt class="literal">1</tt> ì‘ìŒ</span>&#8221;).
                     </li>
                     <li>ë¹„ìŠ·í•˜ê²Œ <tt class="literal">9</tt>ì—ì„œ, ë‹¤ìŒ 10 ë‹¨ìœ„ ë¬¸ìì—ì„œ ëº„ í•„ìš”ê°€ ìˆë‹¤: <tt class="literal">8</tt>ì€ <tt class="literal">VIII</tt>ì´ì§€ë§Œ <tt class="literal">9</tt>ëŠ” <tt class="literal">IX</tt>ì´ë‹¤ (&#8220;<span class="quote"><tt class="literal">10</tt>ë³´ë‹¤ <tt class="literal">1</tt> ì‘ìŒ</span>&#8221;). <tt class="literal">VIIII</tt>ì´ ì•„ë‹ˆë‹¤ (<tt class="literal">I</tt> ë¬¸ìëŠ” ë„¤ ë²ˆ ë°˜ë³µí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤).  <tt class="literal">90</tt>ì€ <tt class="literal">XC</tt>ì´ê³ , <tt class="literal">900</tt>ì€ <tt class="literal">CM</tt>ì´ë‹¤.
                     </li>
                     <li>ì˜¤ ë‹¨ìœ„ ë¬¸ìëŠ” ë°˜ë³µí•  ìˆ˜ ì—†ë‹¤.  <tt class="literal">10</tt>ì€ ì–¸ì œë‚˜ <tt class="literal">X</tt>ë¡œ í‘œí˜„ë˜ì§€, <tt class="literal">VV</tt>ë¡œ í‘œí˜„ë˜ì§€ ì•ŠëŠ”ë‹¤.  <tt class="literal">100</tt>ì€ ì–¸ì œë‚˜ <tt class="literal">C</tt>ì´ì§€, ì ˆëŒ€ë¡œ <tt class="literal">LL</tt>ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
                     </li>
                     <li>ë¡œë§ˆ ìˆ«ìëŠ” ì–¸ì œë‚˜ ë†’ì€ ìë¦¬ì—ì„œ ë‚®ì€ ìë¦¬ ìˆœì„œë¡œ í‘œê¸°ëœë‹¤. ê·¸ë¦¬ê³  ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì½ëŠ”ë‹¤. ê·¸ë˜ì„œ ë¬¸ìì˜ ë¬¸ì„œê°€ ëŒ€ë‹¨íˆ ì¤‘ìš”í•˜ë‹¤.  <tt class="literal">DC</tt>ëŠ” <tt class="literal">600</tt>ì´ë©°; <tt class="literal">CD</tt>ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ìˆ«ìì´ë‹¤ (&#8220;<span class="quote"> <tt class="literal">500</tt>ë³´ë‹¤ <tt class="literal">100</tt> ì‘ì€</span>&#8221;<tt class="literal">400</tt>ì„).  <tt class="literal">CI</tt>ëŠ” <tt class="literal">101</tt>ì´ë‹¤; <tt class="literal">IC</tt>ëŠ” ë¡œë§ˆ ìˆ«ìë¡œ ìœ íš¨í•˜ì§€ë„ ì•Šë‹¤ (<tt class="literal">100</tt>ì—ì„œ ì§ì ‘ì ìœ¼ë¡œ <tt class="literal">1</tt>ì„ ëº„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤;&#8220;<span class="quote"><tt class="literal">100</tt>ë³´ë‹¤ <tt class="literal">10</tt> ì‘ê³ , <tt class="literal">10</tt>ë³´ë‹¤ <tt class="literal">1</tt> ì‘ê²Œ</span>&#8221; <tt class="literal">XCIX</tt>ë¡œ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤).
                     </li>
                  </ol>
               </div>
               <div class="example"><a name="d0e34010"></a><h3 class="title">ì˜ˆì œ&nbsp;14.12.&nbsp;<tt class="filename">roman5.py</tt></h3>
                  <p>ì´ íŒŒì¼ì€ ì˜ˆì œ ë””ë ‰í† ë¦¬ì˜ <tt class="filename">py/roman/stage5/</tt>ì— ìˆìŠµë‹ˆë‹¤.
                  </p>
                  <p>ì•„ì§ ê·¸ë ‡ê²Œ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ì´ ì±…ì— ì‚¬ìš©ëœ <a href="exdive.zip" title="Download example scripts">ë‹¤ìŒ ì˜ˆì œì™€ ê¸°íƒ€ ì˜ˆì œ</a>ë¥¼ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </p><pre class="programlisting">
"""ë¡œë§ˆ ìˆ«ìë¥¼ ë³€í™˜í•œë‹¤"""
import re

# ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.
class RomanError(Exception): pass
class OutOfRangeError(RomanError): pass
class NotIntegerError(RomanError): pass
class InvalidRomanNumeralError(RomanError): pass

# ìë¦¬ìˆ˜ ì§ì§“ê¸°ë¥¼ ì •ì˜í•œë‹¤.
romanNumeralMap = (('M',  1000),
                   ('CM', 900),
                   ('D',  500),
                   ('CD', 400),
                   ('C',  100),
                   ('XC', 90),
                   ('L',  50),
                   ('XL', 40),
                   ('X',  10),
                   ('IX', 9),
                   ('V',  5),
                   ('IV', 4),
                   ('I',  1))

def toRoman(n):
    """ì •ìˆ˜ë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤"""
    if not (0 &lt; n &lt; 4000):
        raise OutOfRangeError, "number out of range (must be 1..3999)"
    if int(n) &lt;&gt; n:
        raise NotIntegerError, "non-integers can not be converted"

    result = ""
    for numeral, integer in romanNumeralMap:
        while n &gt;= integer:
            result += numeral
            n -= integer
    return result

# ìœ íš¨í•œ ë¡œë§ˆ ìˆ«ìë¥¼ íƒì§€í•˜ê¸° ìœ„í•œ íŒ¨í„´ì„ ì •ì˜í•œë‹¤.
romanNumeralPattern = '^M?M?M?(CM|CD|D?C?C?C?)(XC|XL|L?X?X?X?)(IX|IV|V?I?I?I?)$' <a name="roman.stage5.3.1"></a><span class="round">â‘ </span>

def fromRoman(s):
    """ë¡œë§ˆ ìˆ«ìë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•œë‹¤"""
    if not re.search(romanNumeralPattern, s):                                    <a name="roman.stage5.3.2"></a><span class="round">â‘¡</span>
        raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s

    result = 0
    index = 0
    for numeral, integer in romanNumeralMap:
        while s[index:index+len(numeral)] == numeral:
            result += integer
            index += len(numeral)
    return result
</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.3.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì´ íŒ¨í„´ì€ <a href="http://coreapython.hosting.paran.com/dive/chap07.html#re.roman" title="7.3.&nbsp;Case Study: Roman Numerals">ì„¹ì…˜&nbsp;7.3, &#8220;ì‚¬ë¡€ ì—°êµ¬: ë¡œë§ˆ ìˆ«ì&#8221;</a>ì—ì„œ ì—°êµ¬í•œ ë°”ì™€ ë˜‘ ê°™ì´ ê³„ì†ë©ë‹ˆë‹¤. ì‹­ì˜ ìë¦¬ëŠ” <tt class="literal">XC</tt> (<tt class="literal">90</tt>)ì´ê±°ë‚˜ <tt class="literal">XL</tt> (<tt class="literal">40</tt>) ë˜ëŠ” ì„ íƒì ì¸ <tt class="literal">L</tt> ë‹¤ìŒì— 0ì—ì„œ 3ê°œê¹Œì§€ì˜ ì„ íƒì ì¸ <tt class="literal">X</tt> ë¬¸ìê°€ ì˜µë‹ˆë‹¤. ì¼ì˜ ìë¦¬ëŠ” <tt class="literal">IX</tt> (<tt class="literal">9</tt>)ì´ê±°ë‚˜ <tt class="literal">IV</tt> (<tt class="literal">4</tt>) ë˜ëŠ” ì„ íƒì ì¸ <tt class="literal">V</tt> ë‹¤ìŒì— 0ì—ì„œ 3ê°œê¹Œì§€ì˜ ì„ íƒì ì¸ <tt class="literal">I</tt> ë¬¸ìê°€ ì˜µë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.3.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ëª¨ë“  ë¡œì§ì„ ì •ê·œ í‘œí˜„ì‹ ì•ˆìœ¼ë¡œ ë„£ì—ˆìœ¼ë¯€ë¡œ, ë¡œë§ˆ ìˆ«ìê°€ ìœ íš¨í•œì§€ ì ê²€ë‚˜ëŠ” ì½”ë“œëŠ” ì „í˜€ ì–´ë ¤ìš¸ ê²Œ ì—†ìŠµë‹ˆë‹¤. <tt class="function">re.search</tt>ì´ ê°ì²´ë¥¼ í•˜ë‚˜ ëŒë ¤ì£¼ë©´ ì¼ì¹˜ëœ ì •ê·œ í‘œí˜„ì‹ê³¼ ê·¸ ì…ë ¥ì€ ìœ íš¨í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê·¸ ì…ë ¥ì€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>ì´ ì‹œì ì—ì„œ, ì´ ëª»ìƒê¸´ ì»¤ë‹¤ë€ ì •ê·œ í‘œí˜„ì‹ì´ ê³¼ì—° ëª¨ë“  ìœ í˜•ì˜ ë¬´íš¨í•œ ë¡œë§ˆ ìˆ«ìë¥¼ ì¡ì•„ë‚¼ ìˆ˜ ìˆì„ì§€ ì˜ì‹¬ì´ ë“œëŠ” ê²ƒì€ ë‹¹ì—°í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‚´ ë§ì„ ê³§ì´ ê³§ëŒ€ë¡œ ë¯¿ì§€ ë§ˆì‹œê³ , ê·¸ ê²°ê³¼ë¥¼ ì‚´í´ë³´ì„¸ìš”:
               </p>
               <div class="example"><a name="d0e34080"></a><h3 class="title">ì˜ˆì œ&nbsp;14.13.&nbsp;<tt class="filename">roman5.py</tt>ì— ëŒ€í•œ <tt class="filename">romantest5.py</tt>ì˜ ì¶œë ¥ </h3><pre class="screen"><span class="computeroutput">
fromRoman should only accept uppercase input ... ok          </span><a name="roman.stage5.4.1"></a><span class="round">â‘ </span><span class="computeroutput">
toRoman should always return uppercase ... ok
fromRoman should fail with malformed antecedents ... ok      </span><a name="roman.stage5.4.2"></a><span class="round">â‘¡</span><span class="computeroutput">
fromRoman should fail with repeated pairs of numerals ... ok </span><a name="roman.stage5.4.3"></a><span class="round">â‘¢</span><span class="computeroutput">
fromRoman should fail with too many repeated numerals ... ok
fromRoman should give known result with known input ... ok
toRoman should give known result with known input ... ok
fromRoman(toRoman(n))==n for all n ... ok
toRoman should fail with non-integer input ... ok
toRoman should fail with negative input ... ok
toRoman should fail with large input ... ok
toRoman should fail with 0 input ... ok

----------------------------------------------------------------------
Ran 12 tests in 2.864s

OK                                                           </span><a name="roman.stage5.4.4"></a><span class="round">â‘£</span></pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.4.1"><span class="round">â‘ </span></a> 
                           </td>
                           <td valign="top" align="left">ì •ê·œ í‘œí˜„ì‹ì— ê´€í•˜ì—¬ ì–¸ê¸‰í•˜ì§€ ì•Šì€ í•œê°€ì§€ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì •ê·œ í‘œí˜„ì‹ì´ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë³„í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì •ê·œ í‘œí˜„ì‹ <tt class="varname">romanNumeralPattern</tt>ëŠ” ëŒ€ë¬¸ìë¡œ í‘œí˜„ë˜ì—ˆìœ¼ë¯€ë¡œ, <tt class="function">re.search</tt> ì ê²€ì€ ì™„ì „íˆ ëŒ€ë¬¸ìê°€ ì•„ë‹ˆë©´ ì–´ë–¤ ì…ë ¥ë„ ê±°ë¶€í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ëŒ€ë¶„ì ì…ë ¥ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.4.2"><span class="round">â‘¡</span></a> 
                           </td>
                           <td valign="top" align="left">ë” ì¤‘ìš”í•œ ê²ƒì€ ë‚˜ìœ ì…ë ¥ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ëª¨ì–‘ ë‚˜ìœ ì¡°ìƒ í…ŒìŠ¤íŠ¸ëŠ” <tt class="literal">MCMC</tt>ì™€ ê°™ì€ ì‚¬ë¡€ë¥¼ ì ê²€í•©ë‹ˆë‹¤. ë³´ì‹œë‹¤ì‹œí”¼, ì´ëŠ” ì •ê·œ í‘œí˜„ì‹ì— ë¶€í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ <tt class="function">fromRoman</tt>ì€ <tt class="errorcode">InvalidRomanNumeralError</tt> ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ê³ , ì´ëŠ” ëª¨ì–‘ì´ ë‚˜ìœ ì„ ì¡° í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ê°€ ê¸°ëŒ€í•˜ê³  ìˆë˜ ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í•©ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.4.3"><span class="round">â‘¢</span></a> 
                           </td>
                           <td valign="top" align="left">ì‹¤ì œë¡œ, ë‚˜ìœ ì…ë ¥ í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•©ë‹ˆë‹¤. ì´ ì •ê·œ í‘œí˜„ì‹ì€ í…ŒìŠ¤íŠ¸ ì‚¬ë¡€ë¥¼ ë§Œë“¤ ë•Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ì–´ë–¤ ê²ƒì´ë“  ì¡ì•„ëƒ…ë‹ˆë‹¤.
                           </td>
                        </tr>
                        <tr>
                           <td width="12" valign="top" align="left"><a href="#roman.stage5.4.4"><span class="round">â‘£</span></a> 
                           </td>
                           <td valign="top" align="left">ê·¸ë¦¬ê³  ì˜¬í•´ì˜ ëŒ€ì¢…ìƒì€ &#8220;<span class="quote"><tt class="literal">OK</tt></span>&#8221;ë¼ëŠ” ë‹¨ì–´ì— ëŒì•„ê°‘ë‹ˆë‹¤.&#8220;<span class="quote"><tt class="literal">OK</tt></span>&#8221;, ì´ ë‹¨ì–´ëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ <tt class="filename">unittest</tt> ëª¨ë“ˆì— ì˜í•˜ì—¬ ì¸ì‡„ë©ë‹ˆë‹¤.
                           </td>
                        </tr>
                     </table>
                  </div>
               </div><a name="d0e34136"></a><table class="note" border="0" summary="">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="1%"><!-- <span class="roundNote">â˜</span> --><span class="roundNote">â˜</span></td>
                  </tr>
                  <tr>
                     <td colspan="2" align="left" valign="top" width="99%">í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•˜ë©´ ì½”ë”©ì„ ë©ˆì¶”ì„¸ìš”.</td>
                  </tr>
               </table>
            </div>
         </div>
<TABLE class='headerOFcontent'>
<TR>
    <TD align="left"><A HREF="chap13.html">â˜œ ì œ 13 ì¥ ìœ ë‹›í…ŒìŠ¤íŠ¸</A></TD>
    <TD align="center"><A HREF="chap00.html" title="ëª©ì°¨ë¡œ">"""  Dive Into Python  """<BR>ë‹¤ì´ë¹™ íŒŒì´ì¬</A></TD>
    <TD align="right"><A HREF="chap15.html">ì œ 15 ì¥ ë¦¬íŒ©í† ë§ â˜</A></TD>
</TR>
</TABLE>
   </body>
</html>
